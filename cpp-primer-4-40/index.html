

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="cpp_primer_5th_chapter3
主要内容包括迭代器、数组和多维数组。">
  <meta name="author" content="Xie yue">
  <meta name="keywords" content="">
  
  <title>cpp_primer_4_40 - 大树洞！</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.11","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="大树洞！" type="application/atom+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>山丘与树洞</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="cpp_primer_4_40">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-05-24 15:29" pubdate>
        2021年5月24日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      11.6k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      147
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">cpp_primer_4_40</h1>
            
            <div class="markdown-body">
              <p>cpp_primer_5th_chapter3</p>
<p>主要内容包括迭代器、数组和多维数组。</p>
<span id="more"></span>

<h4 id="使用迭代器"><a href="#使用迭代器" class="headerlink" title="使用迭代器"></a>使用迭代器</h4><ol>
<li><p>使用迭代器可以访问标准库中容器的元素。</p>
</li>
<li><p>所有标准库容器都可以使用迭代器，但是其中只有少数几种才同时支持下标运算符。</p>
</li>
<li><p>严格来说，string对象不属于容器类型，但是string支持很多与容器类型类似的操作。vector支持下标运算符，这点和string一样；string支持迭代器，这也和vector一样。</p>
</li>
<li><p>迭代器与指针类型</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//类似于指针类型，迭代器也提供了对对象的间接访问。</span><br><span class="hljs-comment">//就迭代器而言，其对象是容器中的元素或者string对象中的字符。</span><br><span class="hljs-comment">//使用迭代器可以访问某个元素，迭代器也能从一个元素移动到另外一个元素。</span><br><span class="hljs-comment">//迭代器有有效和无效之分</span><br><span class="hljs-comment">//有效的迭代器：</span><br><span class="hljs-comment">//（1）指向某个元素</span><br><span class="hljs-comment">//（2）指向容器中尾元素的下一位置</span><br><span class="hljs-comment">//其它所有的情况都属于无效</span><br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//和指针不一样的是，获取迭代器不是使用取地址符</span><br><span class="hljs-comment">//如果一个类型有迭代器，那么它肯定拥有能返回迭代器的成员</span><br><span class="hljs-comment">//比如，这些类型都拥有名为begin和end的成员</span><br><span class="hljs-comment">//其中begin成员负责返回指向第一个元素（或者第一个字符）的迭代器</span><br><span class="hljs-comment">//end成员则负责返回指向容器（或者string对象）“尾元素的下一个位置”的迭代器</span><br><span class="hljs-comment">//也就是说，该迭代器指示的是容器本不存在的一个“尾后”元素。</span><br><span class="hljs-comment">//这样的迭代器本身并没有什么实际含义</span><br><span class="hljs-comment">//它的作用就是表示我们已经处理完了容器中的所有元素</span><br><span class="hljs-comment">//如果容器为空，则begin和end返回的是同一个迭代器，都是尾后迭代器</span><br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//由编译器决定b和e的类型</span><br><span class="hljs-comment">//b表示v的第一个元素，e表示v尾元素的下一个位置</span><br><span class="hljs-keyword">auto</span> b = v.<span class="hljs-built_in">begin</span>();<br><span class="hljs-keyword">auto</span> e = v.<span class="hljs-built_in">end</span>();<br><span class="hljs-comment">//b和e的类型是相同的</span><br></code></pre></td></tr></table></figure></li>
<li><p>迭代器运算符</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> \<span class="hljs-emphasis">*iter 返回迭代器iter所指元素的引用。</span><br><span class="hljs-emphasis">2. iter-&gt;mem 解引用iter并获取该元素名为mem的成员，等价于(\*</span>iter).mem。<br><span class="hljs-bullet">3.</span> ++iter 令iter指向容器中的下一个元素<br><span class="hljs-bullet">4.</span> --iter 令iter指向容器中的上一个元素<br><span class="hljs-bullet">5.</span> iter1 == iter2 <br><span class="hljs-bullet">6.</span> iter != iter2<br>对于5和6<br>判断两个迭代器是否相等<br>（1）如果两个迭代器指向的是同一个元素<br>（2）两个迭代器是同一个容器的尾后迭代器<br></code></pre></td></tr></table></figure></li>
<li><p>示例：把string对象的第一个字符改成大写形式</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">string <span class="hljs-title">s</span><span class="hljs-params">(<span class="hljs-string">&quot;some string&quot;</span>)</span></span>;<br><span class="hljs-keyword">if</span>(s.<span class="hljs-built_in">begin</span>() != s.<span class="hljs-built_in">end</span>())&#123; <span class="hljs-comment">//确保s非空</span><br>    <span class="hljs-keyword">auto</span> iter = s.<span class="hljs-built_in">begin</span>(); <span class="hljs-comment">//iter表示s的第一个字符</span><br>    *iter = <span class="hljs-built_in">touper</span>(*iter); <span class="hljs-comment">//通过解引用拿到第一个字符的引用并做大小写转换</span><br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>end返回的迭代器并不实际指示某个元素，所以不能对其进行递增或者解引用的操作。</p>
</li>
<li><p>示例：利用迭代器和递增运算符把string对象中第一个单词改为大写形式</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> it = s.<span class="hljs-built_in">begin</span>(); it != s.<span class="hljs-built_in">end</span>() &amp;&amp; !<span class="hljs-built_in">isspace</span>(*it); ++it)&#123;<br>    *it = <span class="hljs-built_in">toupper</span>(*it); <span class="hljs-comment">//将当前字符改成大写的形式</span><br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>泛型编程：在cpp中使用迭代器和 != 会使程序有更强的通用性。因为所有标准库容器都定义了迭代器和==以及!=运算符。</p>
</li>
<li><p>拥有迭代器的标准库类型使用iterator和const_iterator来表示迭代器的类型。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp">vector&lt;<span class="hljs-keyword">int</span>&gt;::iterator it;  <span class="hljs-comment">//it能读写vector&lt;int&gt;的元素</span><br>string::iterator it2; <span class="hljs-comment">//it2能读写string对象中的字符</span><br>vector&lt;<span class="hljs-keyword">int</span>&gt;::const_iterator it3; <span class="hljs-comment">//it3只能读元素，不能写元素</span><br>string::const_iterator it4; <span class="hljs-comment">//it4只能读字符，不能写字符</span><br><span class="hljs-comment">//const_iterator和常量指针差不多，能读取但是不能修改它所指的元素值</span><br><span class="hljs-comment">//iterator的对象可读可写</span><br><span class="hljs-comment">//如果vector对象或string对象是一个常量，只能使用const_iterator</span><br><span class="hljs-comment">//如果vector对象或string对象不是一个常量，两种迭代器都可以用</span><br></code></pre></td></tr></table></figure></li>
<li><p>begin和end返回的具体类型由对象是否的常量决定，如果对象是常量，begin和end返回const_iterator；如果对象不是常量，返回iterator。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp">vector&lt;<span class="hljs-keyword">int</span>&gt; v;<br><span class="hljs-keyword">const</span> vector&lt;<span class="hljs-keyword">int</span>&gt; cv;<br><span class="hljs-keyword">auto</span> it1 = v.<span class="hljs-built_in">begin</span>(); <span class="hljs-comment">//it1的类型是vector&lt;int&gt;::iterator</span><br><span class="hljs-keyword">auto</span> it2 = cv.<span class="hljs-built_in">begin</span>(); <span class="hljs-comment">//it2的类型是vector&lt;int&gt;::const_iterator</span><br></code></pre></td></tr></table></figure></li>
<li><p>为了便于专门得到const_iterator类型的返回值，cpp11新标准引入了两个新函数，cbegin和cend：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">auto</span> it3 = v.<span class="hljs-built_in">cbegin</span>();<span class="hljs-comment">//it3的类型是vector&lt;int&gt;::const_iterator</span><br></code></pre></td></tr></table></figure></li>
<li><p>结合解引用和成员访问操作</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 解引用迭代器可以获得迭代器所指的对象。<br><span class="hljs-bullet">2.</span> 如果该对象的类型恰好是类，则有可能希望进一步访问它的成员。<br><span class="hljs-bullet">3.</span> 例如对于一个由字符串组成的vector对象来说，要检查其元素是否为空，令it是该vector对象的迭代器，只需要检查it所指字符串是否为空就可以了，代码如下所示：<br>（<span class="hljs-emphasis">*it）.empty();</span><br><span class="hljs-emphasis">注意*</span>it.empty(); //错误，试图访问it的名为empty的成员，但是it是个迭代器，没有empty成员<br></code></pre></td></tr></table></figure></li>
<li><p>箭头运算符（-&gt;）：把解引用和成员访问两个操作结合在一起：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//it——&gt;mem和(*it).mem是两个等价的表达式</span><br><span class="hljs-comment">//假设用一个名为text的字符串向量存放文本文件中的数据</span><br><span class="hljs-comment">//其中的元素或者是一句话，或者是一个用于表示段落分割的空字符串</span><br><span class="hljs-comment">//如果要输出text中第一段的内容</span><br><span class="hljs-comment">//可以令迭代器写一个循环遍历text，知道遇到空字符串时为止</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> it = text.<span class="hljs-built_in">cbegin</span>(); it != text.<span class="hljs-built_in">cend</span>() &amp;&amp; !it-&gt;<span class="hljs-built_in">empty</span>(); it++)&#123;<br>    result += (*it);<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>某些对vector对象的操作会使迭代器失效</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//vector对象可以动态的增长，但是也会有一些副作用。</span><br><span class="hljs-comment">//1. 不能在范围for循环中向vector对象添加元素</span><br><span class="hljs-comment">//2. 任何一种可能改变vector对象容量的操作，比如push_back，都会使该vector对象的迭代器失效</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习3.21 请使用迭代器重做第3.3.3节的第一个练习</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	vector&lt;<span class="hljs-keyword">int</span>&gt; v1;<br>	<span class="hljs-function">vector&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">v2</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;<br>	<span class="hljs-function">vector&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">v3</span><span class="hljs-params">(<span class="hljs-number">10</span>, <span class="hljs-number">42</span>)</span></span>;<br>	vector&lt;<span class="hljs-keyword">int</span>&gt; v4&#123; <span class="hljs-number">10</span> &#125;;<br>	vector&lt;<span class="hljs-keyword">int</span>&gt; v5&#123; <span class="hljs-number">10</span>, <span class="hljs-number">42</span> &#125;;<br>	vector&lt;string&gt; v6&#123; <span class="hljs-number">10</span> &#125;;<br>	vector&lt;string&gt; v7&#123; <span class="hljs-number">10</span>, <span class="hljs-string">&quot;hi&quot;</span> &#125;;<br>	cout &lt;&lt; <span class="hljs-string">&quot;v1的元素个数是：&quot;</span> &lt;&lt; v1.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>	<span class="hljs-keyword">if</span> (v1.<span class="hljs-built_in">cbegin</span>() != v1.<span class="hljs-built_in">cend</span>()) &#123;<br>		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = v1.<span class="hljs-built_in">cbegin</span>(); it != v1.<span class="hljs-built_in">cend</span>(); it++) &#123;<br>			cout &lt;&lt; *it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>		&#125;<br>		cout &lt;&lt; endl;<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;v2的元素个数是：&quot;</span> &lt;&lt; v2.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>	<span class="hljs-keyword">if</span> (v2.<span class="hljs-built_in">cbegin</span>()!=v2.<span class="hljs-built_in">cend</span>()) &#123;<br>		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = v2.<span class="hljs-built_in">cbegin</span>(); it != v2.<span class="hljs-built_in">cend</span>(); it++) &#123;<br>			cout &lt;&lt; *it&lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>		&#125;<br>		cout &lt;&lt; endl;<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;v3的元素个数是：&quot;</span> &lt;&lt; v3.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>	<span class="hljs-keyword">if</span> (v3.<span class="hljs-built_in">cbegin</span>()!=v3.<span class="hljs-built_in">cend</span>()) &#123;<br>		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = v3.<span class="hljs-built_in">cbegin</span>(); it != v3.<span class="hljs-built_in">cend</span>(); it++) &#123;<br>			cout &lt;&lt; *it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>		&#125;<br>		cout &lt;&lt; endl;<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;v4的元素个数是：&quot;</span> &lt;&lt; v4.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>	<span class="hljs-keyword">if</span> (v4.<span class="hljs-built_in">cbegin</span>()!= v4.<span class="hljs-built_in">cend</span>()) &#123;<br>		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = v4.<span class="hljs-built_in">cbegin</span>(); it != v4.<span class="hljs-built_in">cend</span>(); it++) &#123;<br>			cout &lt;&lt; *it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>		&#125;<br>		cout &lt;&lt; endl;<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;v5的元素个数是：&quot;</span> &lt;&lt; v5.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>	<span class="hljs-keyword">if</span> (v5.<span class="hljs-built_in">cbegin</span>()!=v5.<span class="hljs-built_in">cend</span>()) &#123;<br>		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = v5.<span class="hljs-built_in">cbegin</span>(); it != v5.<span class="hljs-built_in">end</span>(); it++) &#123;<br>			cout &lt;&lt; *it&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>		&#125;<br>		cout &lt;&lt; endl;<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;v6的元素个数是：&quot;</span> &lt;&lt; v6.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>	<span class="hljs-keyword">if</span> (v6.<span class="hljs-built_in">cbegin</span>()!=v6.<span class="hljs-built_in">cend</span>()) &#123;<br>		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = v6.<span class="hljs-built_in">begin</span>(); it != v6.<span class="hljs-built_in">end</span>(); it++) &#123;<br>			cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>		&#125;<br>		cout &lt;&lt; endl;<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;v7的元素个数是：&quot;</span> &lt;&lt; v7.<span class="hljs-built_in">size</span>() &lt;&lt; endl;<br>	<span class="hljs-keyword">if</span> (v7.<span class="hljs-built_in">cbegin</span>()!=v7.<span class="hljs-built_in">cend</span>()) &#123;<br>		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = v7.<span class="hljs-built_in">begin</span>(); it != v7.<span class="hljs-built_in">end</span>(); it++) &#123;<br>			cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>		&#125;<br>		cout &lt;&lt; endl;<br>	&#125;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习3.22 修改之前那个输出text第一段的程序，首先把text第一段全部改成大写形式，然后再输出它</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	vector&lt;string&gt; text;<br>	string s;<br>	<span class="hljs-comment">//利用getline读取一句话，直接回车产生一个空串，表示段落结束</span><br>	<span class="hljs-keyword">while</span> (<span class="hljs-built_in">getline</span>(cin, s)) &#123;<br>		text.<span class="hljs-built_in">push_back</span>(s);<br>	&#125;<br>	string result;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = text.<span class="hljs-built_in">begin</span>(); it != text.<span class="hljs-built_in">end</span>() &amp;&amp; !it-&gt;<span class="hljs-built_in">empty</span>(); it++) &#123;<br>		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> charIter = it-&gt;<span class="hljs-built_in">begin</span>(); charIter != it-&gt;<span class="hljs-built_in">end</span>(); charIter++) &#123;<br>			*charIter = <span class="hljs-built_in">toupper</span>(*charIter);<br>		&#125;<br>		result += *it;<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;结果为：&quot;</span> &lt;&lt; result &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习3.23  编写一段程序，创建一个含有10个整数的vector对象，然后使用迭代器将所有元素的值都变成原来的两倍，输出vector对象的内容，检验程序是否正确。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;ctime&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstdlib&gt;</span></span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	vector&lt;<span class="hljs-keyword">int</span>&gt; vInt;<br>	<span class="hljs-built_in">srand</span>((<span class="hljs-keyword">unsigned</span>)<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>));<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>		vInt.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">rand</span>() % <span class="hljs-number">1000</span>);<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;随机生成的10个数字是：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = vInt.<span class="hljs-built_in">cbegin</span>(); it != vInt.<span class="hljs-built_in">end</span>(); it++) &#123;<br>		cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	cout &lt;&lt; <span class="hljs-string">&quot;修改后的10个数字是：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = vInt.<span class="hljs-built_in">begin</span>(); it != vInt.<span class="hljs-built_in">end</span>(); it++) &#123;<br>		*it = *it * <span class="hljs-number">2</span>;<br>		cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<h4 id="迭代器计算"><a href="#迭代器计算" class="headerlink" title="迭代器计算"></a>迭代器计算</h4><ol>
<li><p>string和vector的迭代器提供了更多的额外运算符：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> iter + n<br><span class="hljs-bullet">2.</span> iter - n<br><span class="hljs-bullet">3.</span> iter1 += n<br><span class="hljs-bullet">4.</span> iter1 -= n<br><span class="hljs-bullet">5.</span> iter1 - iter2<br><span class="hljs-bullet">6.</span> 关系运算符 &gt; &lt; &gt;= &lt;=<br></code></pre></td></tr></table></figure></li>
<li><p>可以令迭代器和一个整数值相加（或者相减），其返回值是向前（或向后）移动了若干个位置的迭代器。执行这样的操作时，结果迭代器或者指向原vector对象（或string对象）内的一个元素，或者指向原vector对象（或者string对象）尾元素的下一个位置。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//计算得到最接近vi中间元素的一个迭代器</span><br><span class="hljs-keyword">auto</span> mid = vi.<span class="hljs-built_in">begin</span>() + vi.<span class="hljs-built_in">size</span>() / <span class="hljs-number">2</span>;<br><span class="hljs-comment">//如果vi有20个元素，vi.size() / 2 = 10;</span><br><span class="hljs-comment">//此例中即令mid = vi.begin() + 10;</span><br><span class="hljs-comment">//已知下标从0开始，则迭代器所指的元素是vi[10]</span><br><span class="hljs-comment">//也就是从首元素开始向前相隔10个位置的那个元素</span><br></code></pre></td></tr></table></figure></li>
<li><p>对于string和vector的迭代器来说，除了判断是否相等，还能使用关系运算符对其进行比较。参与比较的两个迭代器必须合法且指向的是同一个容器的元素。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//例如假设it和mid是同一个vector对象的两个迭代器，可以用下面的代码表示它们的位置前后</span><br><span class="hljs-keyword">if</span>(it &lt; mid)&#123;<br>    <span class="hljs-comment">//处理vi前半部分的元素</span><br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>只要两个迭代器指向的是同一个容器中的元素或者尾元素的下一个位置，就能将其相减，所得结果是两个迭代器之间的距离。所谓的距离指的是右侧的迭代器向前移动多少位置就能追上左侧的迭代器，其类型是名为different_type的带符号整数。string和vector都定义了different_type，因为这个距离可正可负，所以different_type是带符号类型的。</p>
</li>
<li><p>使用迭代器运算实现二分搜索</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">bool</span> flag = <span class="hljs-literal">false</span>;<br>	<span class="hljs-keyword">int</span> sought =<span class="hljs-number">0</span>;<br>	vector&lt;<span class="hljs-keyword">int</span>&gt; text&#123; <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span> &#125;;<br>	<span class="hljs-keyword">auto</span> beg = text.<span class="hljs-built_in">begin</span>(), end = text.<span class="hljs-built_in">end</span>(); <span class="hljs-comment">//beg和end是进行二分搜索的范围</span><br>	<span class="hljs-keyword">auto</span> mid = text.<span class="hljs-built_in">begin</span>() + (end - beg) / <span class="hljs-number">2</span>;<br>	<span class="hljs-keyword">while</span> (mid != end &amp;&amp; *mid != sought) &#123;<br>		<span class="hljs-keyword">if</span> (sought &lt; *mid) &#123;<br>            <span class="hljs-comment">//注意end的含义是查找范围最后一个元素的后一个元素</span><br>			end = mid;<br>		&#125;<br>		<span class="hljs-keyword">else</span> &#123;<br>			beg = mid + <span class="hljs-number">1</span>;<br>		&#125;<br>		mid = beg + (end - beg) / <span class="hljs-number">2</span>;<br>	&#125;<br>	<span class="hljs-keyword">if</span> (mid != end) &#123;<br>		flag = <span class="hljs-literal">true</span>;<br>	&#125;<br>	cout &lt;&lt; flag &lt;&lt; endl;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习3.24 请使用迭代器重做3.3.3节的最后一个练习 </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//求相邻元素和</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-comment">//求相邻元素和</span><br>	vector&lt;<span class="hljs-keyword">int</span>&gt; vInt;<br>	<span class="hljs-keyword">int</span> iVal;<br>	cout &lt;&lt; <span class="hljs-string">&quot;请输入一组数字：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">while</span> (cin &gt;&gt; iVal) &#123;<br>		vInt.<span class="hljs-built_in">push_back</span>(iVal);<br>	&#125;<br>	<span class="hljs-comment">//判断到底向vector中输入了多少数字</span><br>	<span class="hljs-keyword">if</span> (vInt.<span class="hljs-built_in">cbegin</span>() == vInt.<span class="hljs-built_in">cend</span>()) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;vector中没有任何元素&quot;</span> &lt;&lt; endl;<br>		<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>	&#125;<br>	<span class="hljs-keyword">else</span> &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;相邻两项的和依次是：&quot;</span> &lt;&lt; endl;<br>		<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = vInt.<span class="hljs-built_in">cbegin</span>(); it != vInt.<span class="hljs-built_in">cend</span>() - <span class="hljs-number">1</span>; it++) &#123;<br>			cout &lt;&lt; *it + *(++it) &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>		&#125;<br>		<span class="hljs-comment">//如果元素个数是奇数，就单独处理最后一个元素</span><br>		<span class="hljs-keyword">if</span> (vInt.<span class="hljs-built_in">size</span>() % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>) &#123;<br>			cout &lt;&lt; *(vInt.<span class="hljs-built_in">cend</span>() - <span class="hljs-number">1</span>);<br>		&#125;<br>		cout &lt;&lt; endl;<br>	&#125;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//求首尾元素和</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-comment">//求首尾元素和</span><br>	vector&lt;<span class="hljs-keyword">int</span>&gt; vInt;<br>	<span class="hljs-keyword">int</span> iVal;<br>	cout &lt;&lt; <span class="hljs-string">&quot;请输入一组数字：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">while</span> (cin &gt;&gt; iVal) &#123;<br>		vInt.<span class="hljs-built_in">push_back</span>(iVal);<br>	&#125;<br>	<span class="hljs-comment">//判断到底向vector中输入了多少数字</span><br>	<span class="hljs-keyword">if</span> (vInt.<span class="hljs-built_in">cbegin</span>() == vInt.<span class="hljs-built_in">cend</span>()) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;vector中没有任何元素&quot;</span> &lt;&lt; endl;<br>		<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>	&#125;<br>	<span class="hljs-keyword">auto</span> beg = vInt.<span class="hljs-built_in">cbegin</span>();<br>	<span class="hljs-keyword">auto</span> end = vInt.<span class="hljs-built_in">cend</span>() - <span class="hljs-number">1</span>;<br>	<span class="hljs-keyword">while</span> (beg &lt; end) &#123;<br>		cout &lt;&lt; *beg + *end &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>		beg++;<br>		end--;<br>	&#125;<br>	<span class="hljs-keyword">if</span> (vInt.<span class="hljs-built_in">size</span>() % <span class="hljs-number">2</span> == <span class="hljs-number">1</span>) &#123;<br>		cout &lt;&lt; *beg;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习2.35 3.3.3节划分分数段的程序是使用下标运算符来实现的，请使用迭代器改写该程序并实现完全相同的功能</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>	<span class="hljs-function">vector&lt;<span class="hljs-keyword">unsigned</span>&gt; <span class="hljs-title">vUS</span><span class="hljs-params">(<span class="hljs-number">11</span>)</span></span>; <span class="hljs-comment">//记录各分段的人数，初始值均为0</span><br>	<span class="hljs-keyword">auto</span> it = vUS.<span class="hljs-built_in">begin</span>();<br>	<span class="hljs-keyword">int</span> iVal;<br>	cout &lt;&lt; <span class="hljs-string">&quot;请输入一组成绩：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">while</span> (cin &gt;&gt; iVal) &#123;<br>		<span class="hljs-keyword">if</span>(iVal &lt; <span class="hljs-number">101</span>)<br>            <span class="hljs-comment">//注意这里++写在后面不行，涉及到运算优先级的问题</span><br>			++*(it + iVal / <span class="hljs-number">10</span>);<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;总共输入了&quot;</span> &lt;&lt; vUS.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-string">&quot;个成绩&quot;</span> &lt;&lt; endl;<br>	cout &lt;&lt; <span class="hljs-string">&quot;各分数段的人数是：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> beg = vUS.<span class="hljs-built_in">begin</span>(); beg != vUS.<span class="hljs-built_in">end</span>(); beg++) &#123;<br>		cout &lt;&lt; *beg &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习3.26 在100页的二分搜索程序中，为什么用的是mid = beg + (end - beg) / 2而非mid = (beg + end) / 2;?</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//cpp没有定义迭代器的加法，实际上把两个迭代器加起来是没有意义的</span><br><span class="hljs-comment">//cpp定义了迭代器的减法运算，两个迭代器相减的结果是它们之间的距离</span><br></code></pre></td></tr></table></figure></li>
</ol>
<h4 id="定义和初始化内置数组"><a href="#定义和初始化内置数组" class="headerlink" title="定义和初始化内置数组"></a>定义和初始化内置数组</h4><ol>
<li><p>数组是存放类型相同的对象的容器，这些对象本身没有名字，需要通过其所在的位置访问。</p>
</li>
<li><p>与vector不同的是，数组的大小不变，不能随意向数组中增加元素。因为数组的大小固定，因此对某些特殊的应用来说程序的运行时性能较好，但是相应的也损失了一些灵活性。</p>
</li>
<li><p>数组是一种复合类型。数组的声明型如a[d]，其中a是数组的名字，d是数组的维度。维度说明了数组中元素的个数，因此必须大于0。</p>
</li>
<li><p>数组中元素的个数也属于数组类型的一部分，编译的时候维度应该是已知的，也就是说，维度必须是一个常量表达式。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">unsigned</span> cnt = <span class="hljs-number">42</span>; <span class="hljs-comment">//不是一个常量表达式</span><br><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">unsigned</span> sz = <span class="hljs-number">42</span>; <span class="hljs-comment">//常量表达式</span><br><span class="hljs-keyword">int</span> arr[<span class="hljs-number">10</span>]; <span class="hljs-comment">//含有10个整数的数组</span><br><span class="hljs-keyword">int</span> *parr[sz];<span class="hljs-comment">// 含有42个整型指针的数组</span><br>string bad[cnt];<span class="hljs-comment">// 错误，cnt不是常量表达式</span><br>string strs[<span class="hljs-built_in">get_size</span>()];<span class="hljs-comment">//当get_size是constexpr时正确，否则错误</span><br></code></pre></td></tr></table></figure></li>
<li><p>默认情况下，数组的元素被默认初始化，和内置类型的变量一样，如果函数内部定义了某种内置类型的数组，那么默认初始化会令数组含有未定义的值。</p>
</li>
<li><p>定义数组的时候必须指定数组的类型，不允许用auto关键字由初始值的列表推断类型。另外和vector一样，数组的元素应该为对象，因此不存在引用的数组。</p>
</li>
<li><p>可以对数组的元素进行列表初始化，此时允许忽略数组的维度。如果在声明时没有指明维度，编译器会根据初始值的数量推测出来。相反，如果指明了维度，那么初始值总数量不应该超出指定的大小。如果维度比提供的初始值数量大，则用提供的初始值初始化靠前的元素，剩下的元素被初始化成默认值。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">const</span> <span class="hljs-keyword">unsigned</span> sz = <span class="hljs-number">3</span>;<br><span class="hljs-keyword">int</span> a1[sz] = &#123;<span class="hljs-number">0</span> , <span class="hljs-number">1</span> , <span class="hljs-number">2</span>&#125;; <span class="hljs-comment">//含有三个元素的数组，元素值分别是0，1，2</span><br><span class="hljs-keyword">int</span> a2[] = &#123;<span class="hljs-number">0</span> , <span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;;<span class="hljs-comment">//维度是3的数组</span><br><span class="hljs-keyword">int</span> a3[<span class="hljs-number">5</span>] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;; <span class="hljs-comment">//等价于a3[] = &#123;0, 1, 2, 0, 0&#125;</span><br>string a4[<span class="hljs-number">3</span>] = &#123;<span class="hljs-string">&quot;h1&quot;</span>,<span class="hljs-string">&quot;h2&quot;</span>&#125;<span class="hljs-comment">//等价于a4[] = &#123;&quot;h1&quot;, &quot;h2&quot;,&quot;&quot;&#125;;</span><br><span class="hljs-keyword">int</span> a5[<span class="hljs-number">2</span>] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;;<span class="hljs-comment">// 错误，初始值过多</span><br></code></pre></td></tr></table></figure></li>
<li><p>字符数组有一种额外的初始化形式，我们可以用字符串字面量对此类数组进行初始化。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//当使用这种方式的时候，一定要注意字符串字面值结尾还有一个空字符</span><br><span class="hljs-comment">//这个空字符也会向字符串的其它字符一样被拷贝到字符数组中</span><br><span class="hljs-keyword">char</span> a1[] = &#123;<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;+&#x27;</span>,<span class="hljs-string">&#x27;+&#x27;</span>&#125;;<span class="hljs-comment">//列表初始化，没有空字符</span><br><span class="hljs-keyword">char</span> a2[] = &#123;<span class="hljs-string">&#x27;c&#x27;</span>,<span class="hljs-string">&#x27;+&#x27;</span>,<span class="hljs-string">&#x27;+&#x27;</span>，<span class="hljs-string">&#x27;\0&#x27;</span>&#125;;<span class="hljs-comment">//列表初始化，含有显式的空字符</span><br><span class="hljs-keyword">char</span> a3[] = <span class="hljs-string">&quot;c++&quot;</span>;<span class="hljs-comment">//自动添加表示字符串结束的空字符</span><br><span class="hljs-keyword">char</span> a4[<span class="hljs-number">3</span>] = <span class="hljs-string">&quot;c++&quot;</span>; <span class="hljs-comment">//错误：没有空间可以存放空字符 </span><br></code></pre></td></tr></table></figure></li>
<li><p>不能将数组的内容拷贝给其它数组作为初始值，也不能用数组为其它数组赋值。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">int</span> a[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;;<br><span class="hljs-keyword">int</span> a1[] = a; <span class="hljs-comment">//错误，不允许使用一个数组初始化另一个数组</span><br>a2 = a;<span class="hljs-comment">//错误，不能把一个数组直接赋值给另一个数组</span><br></code></pre></td></tr></table></figure></li>
<li><p>复杂的数组声明：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">int</span> *ptrs[<span class="hljs-number">10</span>]; <span class="hljs-comment">//ptrs是含有10个整型指针的数组</span><br><span class="hljs-keyword">int</span> &amp;refs[<span class="hljs-number">10</span>] = <span class="hljs-comment">/* */</span>; <span class="hljs-comment">//错误，不存在引用的数组</span><br><span class="hljs-built_in"><span class="hljs-keyword">int</span></span>(*Parray)[<span class="hljs-number">10</span>] = &amp;arr; <span class="hljs-comment">//Parray指向一个含有十个整数的数组</span><br><span class="hljs-built_in"><span class="hljs-keyword">int</span></span>(&amp;arrRef)[<span class="hljs-number">10</span>] = arr; <span class="hljs-comment">//arrRef引用一个含有十个整数的数组</span><br><span class="hljs-comment">//默认情况下，类型修饰符从右向左绑定。</span><br><span class="hljs-comment">//对于ptrs来说，从右向左理解其含义比较简单</span><br><span class="hljs-comment">//首先知道我们定义的是一个大小为10的数组，数组名为ptrs</span><br><span class="hljs-comment">//然后知道数组中存放的是指向int的指针</span><br><span class="hljs-comment">//但是对于Parray来讲，从右向左理解就不太合理了</span><br><span class="hljs-comment">//由内向外可以帮助我们更好的理解Parray的含义</span><br><span class="hljs-comment">//首先是圆括号括起来的部分 ,*Parray意味着Parray是一个指针</span><br><span class="hljs-comment">//接下来观察右边，可知Parray是个指向大小为10的数组的指针</span><br><span class="hljs-comment">//最后观察左边，知道数组中的元素是int</span><br><span class="hljs-comment">//这样最终的含义就明确了，Parray是一个指针，指向一个int数组，数组中包含10个元素</span><br><span class="hljs-comment">//（&amp;arrRef）表示arrRef是一个引用，它引用的对象是一个int数组，数组中包含10个元素</span><br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">int</span> *(&amp;arry)[<span class="hljs-number">10</span>] = ptrs; <span class="hljs-comment">//arry是数组的引用，该数组含有10个指针</span><br><span class="hljs-comment">//按照由内向外的顺序阅读</span><br><span class="hljs-comment">//首先知道arry是一个引用</span><br><span class="hljs-comment">//然后观察右边知道，arry引用的对象是个大小为10的数组</span><br><span class="hljs-comment">//最后观察左边知道，数组的元素类型是指向int的指针</span><br><span class="hljs-comment">//arry就是一个含有10个int型指针的数组的引用</span><br></code></pre></td></tr></table></figure></li>
<li><p>综上，要想理解数组声明的含义，最好的办法是从数组的名字开始按照由内向外的顺序阅读。</p>
</li>
<li><p>练习3.27 假设txt_size是一个无参数的函数，它的返回值是int。请回答下列哪个定义是非法的？为什么？ </p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">unsigned</span> buf_size = <span class="hljs-number">1024</span>;<br><span class="hljs-keyword">int</span> ia[buf_size]; <span class="hljs-comment">//非法的，buf_size是一个普通的无符号数，不是常量，不能作为数组的维度</span><br><span class="hljs-keyword">int</span> ib[<span class="hljs-number">4</span> * <span class="hljs-number">7</span> - <span class="hljs-number">14</span>];<span class="hljs-comment">//合法，4 * 7 - 14是一个常量表达式</span><br><span class="hljs-keyword">int</span> ic[<span class="hljs-built_in">txt_size</span>()];<span class="hljs-comment">//非法的，txt_size()是一个普通的函数调用，没有被定义为constexpr，不是常量</span><br><span class="hljs-keyword">char</span> st[<span class="hljs-number">11</span>] = <span class="hljs-string">&quot;fundamental&quot;</span>;<span class="hljs-comment">//非法的，没有考虑字符串末尾的空字符。</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习3.28 下列数组中元素的值是什么？</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp">string sa[<span class="hljs-number">10</span>];<br><span class="hljs-keyword">int</span> ia[<span class="hljs-number">10</span>];<br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>&#123;<br>    string sa2[<span class="hljs-number">10</span>];<br>    <span class="hljs-keyword">int</span> ia2[<span class="hljs-number">10</span>];<br>&#125;<br><span class="hljs-comment">//对于string类型的数组来说</span><br><span class="hljs-comment">//因为string类本身接受无参数的初始化方式</span><br><span class="hljs-comment">//所以不论数组定义在函数体外还是函数体内都默认被初始化为空串</span><br><span class="hljs-comment">//对于内置类型int来说</span><br><span class="hljs-comment">//数组ia定义在函数体之外，ia所有元素默认初始化为0</span><br><span class="hljs-comment">//数组ia2定义在main函数的内部，将不被初始化</span><br><span class="hljs-comment">//如果程序试图拷贝或输出未初始化的变量，将遇到未定义的奇异值</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习3.29 相比于vector来说，数组有哪些缺点，请列举一些。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 数组与vector的相似之处是都能存放类型相同的对象，且这些对象本身没有名字，需要通过其所在位置访问<br><span class="hljs-bullet">2.</span> 数组与vector最大的不同是，数组的大小固定不变，不能随意向数组中增加额外的元素，虽然在某些情境下运行时性能比较好，但是没有vector灵活。<br><span class="hljs-bullet">3.</span> 具体的说，数组的维度在定义的时候已经确定了，如果我们想更改数组的长度，只能创建一个更大的新数组，然后把原数组中的所有元素复制到新数组中去。我们也无法向vector那样使用size函数直接获得数组的维度。<br><span class="hljs-bullet">4.</span> 如果是字符数组，可以调用strlen函数得到字符串的长度；如果是其它数组，只能使用sizeof(array)/sizeof(arr[0])的方式计算数组的维度。<br></code></pre></td></tr></table></figure></li>
</ol>
<h4 id="访问数组元素"><a href="#访问数组元素" class="headerlink" title="访问数组元素"></a>访问数组元素</h4><ol>
<li><p>数组的元素也可以使用范围for语句或下标运算符来访问。</p>
</li>
<li><p>在使用数组下标的时候，通常将其定义为size_t类型。size_t是一种机器相关的无符号类型，它被设计的足够大以便能保存内存中任意对象的大小。在cstddef头文件中定义了size_t类型，这个文件是c标准库stddef.h头文件的c++语言版本。</p>
</li>
<li><p>示例：使用数组来记录各分数段的成绩个数</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">unsigned</span> scores[<span class="hljs-number">11</span>] = &#123;&#125;; <span class="hljs-comment">//11个分数段，全部被初始化为0</span><br><span class="hljs-keyword">unsigned</span> score;<br><span class="hljs-keyword">while</span>(cin &gt;&gt; score)&#123;<br>    ++scores[score / <span class="hljs-number">10</span>];<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习3.30 指出下面代码中的索引错误</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">size_t</span> array_size = <span class="hljs-number">10</span>;<br><span class="hljs-keyword">int</span> ia[array_size];<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">size_t</span> ix = <span class="hljs-number">1</span>; ix &lt;= array_size; ++ix)&#123;<br>    ia[ix] = ix;<br>&#125;<br><span class="hljs-comment">//错误：数组的下标应该大于等于0而小于数组的大小。在本题中，下标范围应该是0到9</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习3.31 编写一段程序，定义一个含有10个int的数组，令每个元素值就是其下标值</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> sz = <span class="hljs-number">10</span>; <span class="hljs-comment">//常量sz作为数组的维度</span><br>	<span class="hljs-keyword">int</span> a[sz];<br>	<span class="hljs-comment">//通过for循环为数组的元素赋值</span><br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; sz; i++) &#123;<br>		a[i] = i;<br>	&#125;<br>	<span class="hljs-comment">//通过范围for循环输出数组的全部元素</span><br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> val : a) &#123;<br>		cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习3.32 将上一题刚刚创建的数组拷贝给另一个数组。利用vector重写程序，实现类似的功能</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//如果想把数组的内容拷贝给另一个数组，不能直接对数组使用赋值运算符，应该逐一拷贝数组的元素</span><br><span class="hljs-comment">//vector的拷贝原理和数组类似</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> sz = <span class="hljs-number">10</span>; <span class="hljs-comment">//常量sz作为数组的维度</span><br>	<span class="hljs-keyword">int</span> a[sz], b[sz];<br>	<span class="hljs-comment">//通过for循环为第一个数组赋值</span><br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; sz; i++) &#123;<br>		a[i] = i;<br>	&#125;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; sz; j++) &#123;<br>		b[j] = a[j];<br>	&#125;<br>	<span class="hljs-comment">//通过范围for循环输出数组的全部元素</span><br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> val : b) &#123;<br>		cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> sz = <span class="hljs-number">10</span>; <span class="hljs-comment">//常量sz作为vector的容量</span><br>	vector&lt;<span class="hljs-keyword">int</span>&gt; vInt, vInt2;<br>	<span class="hljs-comment">//通过for循环为vector对象的元素赋值</span><br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; sz; i++) &#123;<br>		vInt.<span class="hljs-built_in">push_back</span>(i);<br>	&#125;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; sz; j++) &#123;<br>		vInt2.<span class="hljs-built_in">push_back</span>(vInt[j]);<br>	&#125;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> val : vInt2) &#123;<br>		cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习3.33 对于104页的程序来说，如果不初始化scores将发生什么？</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//该程序对scores执行了列表初始化，为所有元素赋初值为0，这样在后续统计时将会从0开始计算个各分段的人数</span><br><span class="hljs-comment">//如果不初始化，则该数组会含有未定义的值，这是因为scores是定义在函数内部的整型数组，不会执行默认初始化</span><br></code></pre></td></tr></table></figure></li>
</ol>
<h4 id="指针和数组"><a href="#指针和数组" class="headerlink" title="指针和数组"></a>指针和数组</h4><ol>
<li><p>通常情况下，使用取地址符来获取指向某个对象的指针，取地址符可以作用于任何对象。</p>
</li>
<li><p>数组的元素也是对象，对数组使用下标运算符可以得到该数组指定位置的元素。因此像其它对象一样，对数组的元素使用取地址符就能得到指向该元素的指针：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp">string nums[] = &#123;<span class="hljs-string">&quot;one&quot;</span>, <span class="hljs-string">&quot;two&quot;</span>, <span class="hljs-string">&quot;three&quot;</span>&#125;; <span class="hljs-comment">//数组的元素是string对象</span><br>string *p = &amp;nums[<span class="hljs-number">0</span>]; <span class="hljs-comment">//p指向nums的第一个元素</span><br></code></pre></td></tr></table></figure></li>
<li><p>数组的特性：在很多使用数组名的地方，编译器会自动的将其替换为一个指向数组首元素的指针：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp">string *p2 = nums; <span class="hljs-comment">//等价于 p2 = &amp;nums[0];</span><br></code></pre></td></tr></table></figure></li>
<li><p>当使用数组作为一个auto变量的初始值的时候，推断得到的类型是指针而非数组</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">int</span> ia[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>&#125;; <span class="hljs-comment">//ia是一个含有三个整数的数组</span><br><span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">ia2</span><span class="hljs-params">(ia)</span></span>; <span class="hljs-comment">//ia2是一个整型指针，指向ia的第一个元素</span><br>ia2 = <span class="hljs-number">42</span>; <span class="hljs-comment">//错误：ia2是一个指针，不能用int值给指针赋值</span><br><span class="hljs-comment">//当使用ia作为初始值时，编译器实际执行的初始化过程类似于下面的形式</span><br><span class="hljs-function"><span class="hljs-keyword">auto</span> <span class="hljs-title">ia2</span><span class="hljs-params">(&amp;ia[<span class="hljs-number">0</span>])</span></span>; <span class="hljs-comment">//显然ia2的类型是int*</span><br></code></pre></td></tr></table></figure></li>
<li><p>当使用decltype关键字时，上述转换不会发生，decltype（ia）返回的类型是由十个整数构成的数组：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//ia3是一个含有10个整数的数组</span><br><span class="hljs-keyword">decltype</span>(ia) ia3 = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>&#125;;<br>ia3 = p; <span class="hljs-comment">//错误，不能用整形指针给数组赋值</span><br>ia3[<span class="hljs-number">4</span>] = i;<span class="hljs-comment">//正确，把i的值赋给ia3的一个元素</span><br></code></pre></td></tr></table></figure></li>
<li><p>指向数组元素的指针拥有更多的功能，vector和string的迭代器支持的运算，数组的指针全部支持。例如，允许使用递增运算符将指向数组元素的指针向前移动到下一个位置上。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">int</span> arr[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>&#125;;<br><span class="hljs-keyword">int</span> *p = arr; <span class="hljs-comment">//p指向arr的第一个元素</span><br>++P; <span class="hljs-comment">//p指向arr[1]</span><br><span class="hljs-comment">//就像使用迭代器遍历vector对象中的元素一样，使用指针也能遍历数组中的元素</span><br><span class="hljs-comment">//通过数组名字或者数组中首元素的地址都能得到指向首元素的指针</span><br><span class="hljs-keyword">int</span> *e = &amp;arr[<span class="hljs-number">10</span>]; <span class="hljs-comment">//指向arr尾元素的下一位置的指针</span><br><span class="hljs-comment">//尾后指针e不指向具体的元素。因此不能对尾后指针执行解引用或者递增的操作。</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> *b = arr; b != e; b++)&#123;<br>    cout&lt;&lt; *b &lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br>cout&lt;&lt;endl;<br></code></pre></td></tr></table></figure></li>
<li><p>标准库函数begin和end</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//cpp11新标准引入了两个名为begin和end的函数，这两个函数定义在iterator头文件中</span><br><span class="hljs-comment">//这两个函数与容器中的两个同名成员类似</span><br><span class="hljs-comment">//数组不是类类型，因此这两个函数不是成员函数，正确的使用形式是将数组作为它们的参数</span><br><span class="hljs-keyword">int</span> ia[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>&#125;; <span class="hljs-comment">//ia是一个含有10个整数的数组</span><br><span class="hljs-keyword">int</span> *beg = <span class="hljs-built_in">begin</span>(ia); <span class="hljs-comment">//指向ia首元素的指针</span><br><span class="hljs-keyword">int</span> *last = <span class="hljs-built_in">end</span>(ia); <span class="hljs-comment">//指向arr尾元素的下一个位置的指针</span><br></code></pre></td></tr></table></figure></li>
<li><p>指向数组元素的指针可以执行上述列出的所有迭代器运算。这些运算，包括解引用，递增，比较，与整数相加，两个指针相减等，用在指针和用在迭代器上意义完全一致。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//给一个指针加上（减去）某整数值，结果仍是指针</span><br><span class="hljs-comment">//新指针指向的元素与原来的指针相比前进了（后退了）该整数值个位置：</span><br><span class="hljs-keyword">constexpr</span> <span class="hljs-keyword">size_t</span> sz = <span class="hljs-number">5</span>;<br><span class="hljs-keyword">int</span> arr[sz] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-keyword">int</span> *ip = arr; <span class="hljs-comment">//等价于int *ip = &amp;arr[0];</span><br><span class="hljs-keyword">int</span> *ip2 = ip + <span class="hljs-number">4</span>; <span class="hljs-comment">//ip2指向arr的尾元素arr[4]</span><br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">int</span> *p = arr + sz; <span class="hljs-comment">//使用警告，不要解引用</span><br><span class="hljs-keyword">int</span> *p2 = arr + <span class="hljs-number">10</span>; <span class="hljs-comment">//错误：arr只有5个元素，p2的值未定义</span><br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//和迭代器一样，两个指针相减的结果是它们之间的距离</span><br><span class="hljs-comment">//参与运算的两个指针必须指向同一个数组中的元素：</span><br><span class="hljs-keyword">auto</span> n = <span class="hljs-built_in">end</span>(arr) - <span class="hljs-built_in">begin</span>(arr); <span class="hljs-comment">//n的值是5，也就是arr中元素的数量</span><br><span class="hljs-comment">//两个指针相减的结果是一种名为ptrdiff_t的标准库类型</span><br><span class="hljs-comment">//和size_t一样，ptrdiff_t也是一种定义在cstddef头文件中的机器相关的类型</span><br><span class="hljs-comment">//因为差值可能为负值，所以ptrdiff_t是一种带符号类型</span><br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//利用关系运算符对指针进行比较从而完成遍历</span><br><span class="hljs-keyword">int</span> *b = arr;<br><span class="hljs-keyword">int</span> *e = arr + sz;<br><span class="hljs-keyword">while</span>(b &lt; e)&#123;<br>    <span class="hljs-comment">/*使用指针*/</span><br>    ++b;<br>&#125;<br><span class="hljs-comment">//如果两个指针分别指向不想关的对象，则不能比较它们</span><br></code></pre></td></tr></table></figure>

<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 上述指针运算同样适用于空指针和所指对象并非数组的指针。<br><span class="hljs-bullet">2.</span> 在后一种情况下，两个指针必须指向同一个对象或者该对象的下一个位置。<br><span class="hljs-bullet">3.</span> 如果p是空指针，允许给p加上或减去一个值为0的整型常量表达式。<br><span class="hljs-bullet">4.</span> 两个空指针也允许彼此相减，结果当然是0。<br></code></pre></td></tr></table></figure></li>
<li><p>如前所述，在很多情况下使用数组的名字其实用的是一个指向数组首元素的指针，一个典型的例子是当对这些数组使用下标运算符的时候，编译器会自动执行上述转换操作。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">int</span> ia[] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>&#125;;<br><span class="hljs-comment">//对数组执行下标运算其实是对指向数组元素的指针执行下标运算</span><br><span class="hljs-keyword">int</span> i = ia[<span class="hljs-number">2</span>]; <span class="hljs-comment">//ia替换成指向数组首元素的指针，ia[2]替换成(ia + 2)指向的元素</span><br><span class="hljs-comment">//可以等价于如下的语句</span><br><span class="hljs-keyword">int</span> *p = ia;<br><span class="hljs-keyword">int</span> i = *(p + <span class="hljs-number">2</span>);<br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//内置的下标运算符所用的索引值不是无符号类型，这一点与vector和string不一样</span><br><span class="hljs-keyword">int</span> *p = &amp;ia[<span class="hljs-number">2</span>]; <span class="hljs-comment">//p指向索引为2的元素</span><br><span class="hljs-keyword">int</span> j = p[<span class="hljs-number">1</span>]; <span class="hljs-comment">//p[1]等价于*(p + 1)，就是ia[3]表示的那个元素</span><br><span class="hljs-keyword">int</span> k = p[<span class="hljs-number">-2</span>]; <span class="hljs-comment">//p[-2]是ia[0]表示的那个元素</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习3.34 假定p1和p2指向同一个数组中的元素，则下面程序的功能是什么？什么情况下该程序是非法的？</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp">p1 += p2 - p1;<br><span class="hljs-comment">//如果p1和p2指向同一个数组中的元素</span><br><span class="hljs-comment">//则该条语句令p1指向p2原来所指向的元素</span><br><span class="hljs-comment">//从语法上说，即使p1和p2指向的元素不属于同一个数组，但只要p1和p2的类型相同也是合法的</span><br><span class="hljs-comment">//如果p1和p2的类型不同，则编译时报错</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习3.35 编写一段程序，利用指针将数组的元素置为0。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> sz = <span class="hljs-number">10</span>; <span class="hljs-comment">//常量sz作为数组的维度</span><br>	<span class="hljs-keyword">int</span> a[sz];<br>	<span class="hljs-comment">//通过for循环为数组元素赋值</span><br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; sz; i++) &#123;<br>		a[i] = i;<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;初始状态下的数组为：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> num : a) &#123;<br>		cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	<span class="hljs-keyword">int</span>* p = <span class="hljs-built_in">begin</span>(a);<br>	<span class="hljs-keyword">int</span>* e = <span class="hljs-built_in">end</span>(a);<br>	<span class="hljs-keyword">while</span> (p &lt; e) &#123;<br>		*p = <span class="hljs-number">0</span>;<br>		++p;<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;修改后数组的内容是：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> num : a) &#123;<br>		cout &lt;&lt; num &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习3.36 编写一段程序，比较两个数组是否相等。再写一段程序，比较两个vector对象是否相等。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//无论是对比两个数组是否相等还是两个vector对象是否相等</span><br><span class="hljs-comment">//都必须逐一比较其元素</span><br><span class="hljs-comment">//比较两个数组是否相等</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> sz = <span class="hljs-number">5</span>;<br>	<span class="hljs-keyword">int</span> a[sz], b[sz];<br>	<span class="hljs-comment">//生成随机数种子</span><br>	<span class="hljs-built_in">srand</span>((<span class="hljs-keyword">unsigned</span>)<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>));<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; sz; i++) &#123;<br>		a[i] = <span class="hljs-built_in">rand</span>() % <span class="hljs-number">10</span>; <span class="hljs-comment">//每次生成一个10以内的随机数并添加到a中 </span><br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;数据已经生成，请输入您猜测的数字：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">int</span> uVal;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; sz; i++) &#123;<br>		<span class="hljs-keyword">if</span> (cin &gt;&gt; uVal) &#123;<br>			b[i] = uVal;<br>		&#125;<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;系统生成的数据是：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> val : a) &#123;<br>		cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	cout &lt;&lt; <span class="hljs-string">&quot;用户猜测的数据是：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> val : b) &#123;<br>		cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span> ;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	<span class="hljs-keyword">int</span>* p = <span class="hljs-built_in">begin</span>(a);<br>	<span class="hljs-keyword">int</span>* q = <span class="hljs-built_in">begin</span>(b);<br>	<span class="hljs-keyword">while</span> (p != <span class="hljs-built_in">end</span>(a) &amp;&amp; q != <span class="hljs-built_in">end</span>(b)) &#123;<br>		<span class="hljs-keyword">if</span> (*p != *q) &#123;<br>			cout &lt;&lt; <span class="hljs-string">&quot;没有猜对&quot;</span> &lt;&lt; endl;<br>			<span class="hljs-keyword">break</span>;<br>		&#125;<br>		<span class="hljs-keyword">else</span> &#123;<br>			p++;<br>			q++;<br>		&#125;<br>	&#125;<br>	<span class="hljs-keyword">if</span> (p == <span class="hljs-built_in">end</span>(a) &amp;&amp; q == <span class="hljs-built_in">end</span>(b)) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;猜对了&quot;</span> &lt;&lt; endl;<br>	&#125;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//比较两个vector对象是否相等</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> sz = <span class="hljs-number">5</span>;<br>	vector&lt;<span class="hljs-keyword">int</span>&gt; a, b;<br>	<span class="hljs-comment">//生成随机数种子</span><br>	<span class="hljs-built_in">srand</span>((<span class="hljs-keyword">unsigned</span>)<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>));<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; sz; i++) &#123;<br>		a.<span class="hljs-built_in">push_back</span>(<span class="hljs-built_in">rand</span>() % <span class="hljs-number">10</span>); <span class="hljs-comment">//每次生成一个10以内的随机数并添加到a中 </span><br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;数据已经生成，请输入您猜测的数字：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">int</span> uVal;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; sz; i++) &#123;<br>		<span class="hljs-keyword">if</span> (cin &gt;&gt; uVal) &#123;<br>			b.<span class="hljs-built_in">push_back</span>(uVal);<br>		&#125;<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;系统生成的数据是：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> val : a) &#123;<br>		cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	cout &lt;&lt; <span class="hljs-string">&quot;用户猜测的数据是：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> val : b) &#123;<br>		cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span> ;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	<span class="hljs-keyword">auto</span> it1 = a.<span class="hljs-built_in">cbegin</span>();<br>	<span class="hljs-keyword">auto</span> it2 = b.<span class="hljs-built_in">cbegin</span>();<br>	<span class="hljs-keyword">while</span> (it1 != a.<span class="hljs-built_in">cend</span>() &amp;&amp; it2 != b.<span class="hljs-built_in">cend</span>()) &#123;<br>		<span class="hljs-keyword">if</span> (*it1 != *it2) &#123;<br>			cout &lt;&lt; <span class="hljs-string">&quot;没有猜对&quot;</span> &lt;&lt; endl;<br>			<span class="hljs-keyword">break</span>;<br>		&#125;<br>		<span class="hljs-keyword">else</span> &#123;<br>			it1++;<br>			it2++;<br>		&#125;<br>	&#125;<br>	<span class="hljs-keyword">if</span> (it1 == a.<span class="hljs-built_in">cend</span>() &amp;&amp; it2 == b.<span class="hljs-built_in">cend</span>()) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;猜对了&quot;</span> &lt;&lt; endl;<br>	&#125;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<h4 id="c风格字符串"><a href="#c风格字符串" class="headerlink" title="c风格字符串"></a>c风格字符串</h4><ol>
<li><p>首先说明，尽管cpp支持c风格字符串，但是在c++程序中还是不要使用它们，容易引发程序漏洞。</p>
</li>
<li><p>字符串字面值是一种通用结构的实例，这种结构即是c++由c继承而来的c风格字符串。c风格字符串不是一种类型，而是为了表达和使用字符串而形成的一种约定俗成的写法。按此习惯书写的字符串存放在字符数组中并以空字符结束。以空字符结束的意思是在字符串最后一个字符后面跟着一个空字符（’\0’）,一般用指针来操作这些字符串。</p>
</li>
<li><p>c标准库String函数</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown">//这些函数定义在cstring头文件中<br>//可以用于操作c风格字符串<br><span class="hljs-bullet">1.</span> strlen(p)：返回p的长度，空字符不计算在内<br>//比较p1和p2的相等性。如果p1 == p2，返回0<br>//如果p1 &lt; p2返回一个负值<br>//如果p1 &gt; p2返回一个正值<br><span class="hljs-bullet">2.</span> strcmp(p1, p2)<br><span class="hljs-bullet">3.</span> strcat(p1, p2) ：将p2附加到p1之后，返回p1<br><span class="hljs-bullet">4.</span> strcpy(p1, p2)：将p2拷贝给p1，返回p1<br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//传入此类函数的指针必须指向以空字符作为结束的数组</span><br><span class="hljs-keyword">char</span> ca[] = &#123;<span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;+&#x27;</span>, <span class="hljs-string">&#x27;+&#x27;</span>&#125;; <span class="hljs-comment">//不以空字符结束</span><br>cout&lt;&lt; <span class="hljs-built_in">strlen</span>(ca) &lt;&lt;endl; <span class="hljs-comment">//严重错误，ca没有以空字符结束</span><br></code></pre></td></tr></table></figure></li>
<li><p>比较字符串：比较两个c语言风格的字符串应该使用strcmp，不能直接使用关系运算符</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//比较标准库string对象的时候，用的是普通的关系型运算符和相等运算符</span><br>string s1 = <span class="hljs-string">&quot;hello&quot;</span>;<br>string s2 = <span class="hljs-string">&quot;world&quot;</span>;<br><span class="hljs-keyword">if</span>(s1 &lt; s2)&#123; <span class="hljs-comment">//false</span><br>    <br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//如果把上述运算符用在两个c风格字符串上，实际比较的将是指针而非字符串本身</span><br><span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> ca1[] = <span class="hljs-string">&quot;A string example&quot;</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> ca2[] = <span class="hljs-string">&quot;another string&quot;</span>;<br><span class="hljs-keyword">if</span>(ca1 &lt; ca2) <span class="hljs-comment">//未定义的：试图比较两个毫不相干的地址</span><br><span class="hljs-comment">//当使用数组的时候，其实真正用的是指向数组首元素的指针</span><br><span class="hljs-comment">//因此，上面的if条件实际上比较的是两个const char*的值</span><br><span class="hljs-comment">//这两个指针指向的并非同一对象，所以将得到未定义的结果</span><br></code></pre></td></tr></table></figure></li>
<li><p>连接或者拷贝c风格字符串，正确的方法是使用strcpy和strcat。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//不过要想使用这两个函数，还必须提供一个用于存放结果字符串的数组</span><br><span class="hljs-comment">//该数组必须足够大以容纳下结果字符串以及末尾的空字符</span><br><span class="hljs-comment">//如果算错了largeStr的大小将引发严重错误</span><br><span class="hljs-built_in">strcpy</span>(largeStr, ca1); <span class="hljs-comment">//把ca1拷贝给largeStr</span><br><span class="hljs-built_in">strcpy</span>(largeStr, <span class="hljs-string">&quot; &quot;</span>); <span class="hljs-comment">//在末尾加上一个空格</span><br><span class="hljs-built_in">strcpy</span>(largeStr, ca2); <span class="hljs-comment">//把ca2拷贝给largeStr</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习3.37 下列程序是什么含义，程序输出的结果是什么？</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> ca[] = &#123;<span class="hljs-string">&#x27;h&#x27;</span>, <span class="hljs-string">&#x27;e&#x27;</span>, <span class="hljs-string">&#x27;l&#x27;</span>, <span class="hljs-string">&#x27;l&#x27;</span>, <span class="hljs-string">&#x27;o&#x27;</span>&#125;;<br><span class="hljs-keyword">const</span> <span class="hljs-keyword">char</span> *cp = ca;<br><span class="hljs-keyword">while</span>(*cp)&#123;<br>    cout&lt;&lt;*cp&lt;&lt;endl;<br>    ++cp;<br>&#125;<br><span class="hljs-comment">//该程序的原意就是输出ca中存储的5个字符，每个字符占一行</span><br><span class="hljs-comment">//以列表初始化方式赋值的c风格字符串与以字符串字面量赋值的有所区别</span><br><span class="hljs-comment">//后者会在字符串最后额外增加一个空字符以示字符串的结束，而前者不会这样做</span><br><span class="hljs-comment">//因此在该程序中，ca的五个字符全部输出后，并没有遇到预期的空字符</span><br><span class="hljs-comment">//程序继续在内存中ca的存储位置之后挨个寻找空字符，直到找到为止</span><br><span class="hljs-comment">//在这个过程中，额外经历的内容也被输出出来，从而产生错误</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习3.38 在本书中我们提到，将两个指针相加不但是非法的，而且没什么意义，请问为什么两个指针相加没有意义。</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 指针也是一个对象，与指针相关的属性有三个：<br><span class="hljs-code">	（1）指针本身的值(value)</span><br><span class="hljs-code">	（2）指针所指的对象(content)</span><br><span class="hljs-code">	（3）指针本身在内存中的存储位置(address)</span><br><span class="hljs-code">2. 指针本身的值：是一个内存地址值，表示指针所指对象在内存中的存储地址。</span><br><span class="hljs-code">3. 指针所指的对象：指针所指对象可以通过解引用指针访问。</span><br><span class="hljs-code">4. 指针本身在内存中的存储位置：指针也是一个对象，所以指针也存储在内存中的某个位置，它有自己的地址，这也是为什么有&quot;指针的指针&quot;的原因。</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习3.39 编写一段程序，比较两个string对象。再编写一段程序，比较两个c风格字符串的内容。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//比较两个string 对象</span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-comment">//比较两个string对象</span><br>	string str1, str2;<br>	cout &lt;&lt; <span class="hljs-string">&quot;请输入两个字符串：&quot;</span> &lt;&lt; endl;<br>	cin &gt;&gt; str1 &gt;&gt; str2;<br>	<span class="hljs-keyword">if</span> (str1 &gt; str2) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;第一个字符串大于第二个字符串&quot;</span> &lt;&lt; endl;<br>	&#125;<br>	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (str1 &lt; str2) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;第一个字符串小于第二个字符串&quot;</span> &lt;&lt; endl;<br>	&#125;<br>	<span class="hljs-keyword">else</span> &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;两个字符串相等&quot;</span> &lt;&lt; endl;<br>	&#125;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//比较两个c风格的字符串</span><br><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;cstring&gt;</span></span><br><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-comment">//比较两个c风格字符串的内容</span><br>	<span class="hljs-keyword">char</span> str1[<span class="hljs-number">80</span>], str2[<span class="hljs-number">80</span>];<br>	cout &lt;&lt; <span class="hljs-string">&quot;请输入两个字符串&quot;</span> &lt;&lt; endl;<br>	cin &gt;&gt; str1 &gt;&gt; str2;<br>	<span class="hljs-keyword">auto</span> result = <span class="hljs-built_in">strcmp</span>(str1, str2);<br>	<span class="hljs-built_in"><span class="hljs-keyword">switch</span></span> (result) &#123;<br>	<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>		cout &lt;&lt; <span class="hljs-string">&quot;第一个字符串大于第二个字符串&quot;</span> &lt;&lt; endl;<br>		<span class="hljs-keyword">break</span>;<br>	<span class="hljs-keyword">case</span> <span class="hljs-number">-1</span>:<br>		cout &lt;&lt; <span class="hljs-string">&quot;第一个字符串小于第二个字符串&quot;</span> &lt;&lt; endl;<br>		<span class="hljs-keyword">break</span>;<br>	<span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<br>		cout &lt;&lt; <span class="hljs-string">&quot;两个字符串相等&quot;</span> &lt;&lt; endl;<br>		<span class="hljs-keyword">break</span>;<br>	<span class="hljs-keyword">default</span>:<br>		cout &lt;&lt; <span class="hljs-string">&quot;未定义的结果&quot;</span> &lt;&lt; endl;<br>		<span class="hljs-keyword">break</span>;<br>	&#125;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习3.40 编写一段程序，定义两个字符数组并用字符串字面值初始化它们，接着再定义一个数组存放前两个数组连接之后的结果。使用strcpy和strcat把前两个数组的内容拷贝到第三个数组中。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//这部分代码有问题</span><br></code></pre></td></tr></table></figure></li>
</ol>
<h4 id="与旧代码的接口"><a href="#与旧代码的接口" class="headerlink" title="与旧代码的接口"></a>与旧代码的接口</h4><ol>
<li><p>混用string对象和c风格字符串</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 任何出现字符串字面值的地方都可以用以空字符结束的字符数组来替代。<br><span class="hljs-bullet">2.</span> 允许使用以空字符结束的字符数组来初始化string对象或为string对象赋值。<br><span class="hljs-bullet">3.</span> 在string对象的加法运算中允许使用以空字符结束的字符数组作为其中一个运算对象（不能两个运算对象都是）；在string对象的复合赋值运算中允许使用以空字符结束的字符数组作为右侧的运算对象。<br><span class="hljs-bullet">4.</span> 上述性质反过来并不成立。<br><span class="hljs-bullet">5.</span> 如果程序的某处需要一个c风格字符串，无法直接使用string对象来代替它。例如，不能用string对象直接初始化指向字符的指针。为了完成该功能，string专门提供了一个名为c<span class="hljs-emphasis">_str的成员函数：</span><br><span class="hljs-emphasis">char * str = s; //错误，不能用string对象初始化char * </span><br><span class="hljs-emphasis">const char * str = s.c_</span>str(); //正确<br><span class="hljs-bullet">6.</span> 函数的返回结果是一个指针，该指针指向一个以空字符结束的字符数组，而这个数组所存的数据恰好与那个string对象一样。结果指针的类型是const char <span class="hljs-emphasis">* ，从而确保我们不会改变字符数组的内容。</span><br><span class="hljs-emphasis">7. 无法保证c_str函数返回的数组一直有效，事实上，如果后续的操作改变了s的值就可能让之前返回的数组失去效用。</span><br></code></pre></td></tr></table></figure></li>
<li><p>使用数组初始化vector对象</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//不允许使用一个数组为另一个内置类型的数组赋值</span><br><span class="hljs-comment">//不允许使用vector对象初始化数组</span><br><span class="hljs-comment">//允许使用数组初始化vector对象</span><br><span class="hljs-comment">//要实现这一目的，只需指明要拷贝区域的首元素地址和尾后地址就可以了</span><br><span class="hljs-keyword">int</span> int_arr = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>&#125;;<br><span class="hljs-comment">//ivec中有6个元素，分别是int_arr中对应元素的副本</span><br><span class="hljs-function">vector&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">ivec</span><span class="hljs-params">(begin(int_arr), end(int_arr))</span></span>;<br><span class="hljs-comment">//其中第二个指针指向待拷贝区域尾元素的下一位置</span><br><span class="hljs-comment">//使用标准库函数begin和end来分别计算int_arr来计算首指针和尾后指针</span><br><span class="hljs-comment">//拷贝部分元素</span><br><span class="hljs-function">vector&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">ivec2</span><span class="hljs-params">(int_arr + <span class="hljs-number">1</span>, int_arr + <span class="hljs-number">4</span>)</span></span>;<br><span class="hljs-comment">//vector中有3个元素，分别是int_arr[1], int_arr[2], int_arr[3]</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习3.14 编写一段程序，用整型数组初始化一个vector对象</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> sz = <span class="hljs-number">10</span>;<br>	<span class="hljs-keyword">int</span> a[sz];<br>	<span class="hljs-built_in">srand</span>((<span class="hljs-keyword">unsigned</span>)<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>));<br>	cout &lt;&lt; <span class="hljs-string">&quot;数组的内容是：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-comment">//利用范围for循环遍历数组的每个元素</span><br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span>&amp; val : a) &#123;<br>		val = <span class="hljs-built_in">rand</span>() % <span class="hljs-number">10</span>;<br>		cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	<span class="hljs-function">vector&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-title">ivec</span><span class="hljs-params">(begin(a), end(a))</span></span>;<br>	cout &lt;&lt; <span class="hljs-string">&quot;vector的内容是：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> val : ivec) &#123;<br>		cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习3.42 编写一段程序，将含有整数元素的vector对象拷贝给一个整型数组</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> sz = <span class="hljs-number">10</span>; <span class="hljs-comment">//指明vector的容量</span><br>	vector&lt;<span class="hljs-keyword">int</span>&gt; ivec;<br>	<span class="hljs-built_in">srand</span>((<span class="hljs-keyword">unsigned</span>)<span class="hljs-built_in">time</span>(<span class="hljs-literal">NULL</span>));<br>	cout &lt;&lt; <span class="hljs-string">&quot;vector中的内容是：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; sz; i++) &#123;<br>		<span class="hljs-keyword">auto</span> val = <span class="hljs-built_in">rand</span>() % <span class="hljs-number">10</span>;<br>		ivec.<span class="hljs-built_in">push_back</span>(val);<br>		cout &lt;&lt; val &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	<span class="hljs-keyword">int</span> a[sz];<br>	cout &lt;&lt; <span class="hljs-string">&quot;数组的内容是：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> i = <span class="hljs-number">0</span>; i &lt; sz; i++) &#123;<br>		a[i] = ivec[i];<br>		cout &lt;&lt; a[i] &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>	&#125;<br>	cout &lt;&lt; endl;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>
<h4 id="多维数组"><a href="#多维数组" class="headerlink" title="多维数组"></a>多维数组</h4><ol>
<li><p>严格来说，cpp中没有多维数组，通常所说的数组指的是数组的数组。当一个数组的元素也是数组的时候，通常用两个维度来定义它，一个维度表示数组本身大小，另一个维度表示其元素的大小。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">int</span> ia[<span class="hljs-number">10</span>][<span class="hljs-number">20</span>][<span class="hljs-number">30</span>] = &#123;<span class="hljs-number">0</span>&#125;;<br><span class="hljs-comment">//大小为10的数组，它的每个元素都是大小为20的数组</span><br><span class="hljs-comment">//这些数组的元素是含有30个整数的数组</span><br><span class="hljs-comment">//将所有的元素初始化为0</span><br></code></pre></td></tr></table></figure></li>
<li><p>多维数组的初始化</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">int</span> ia[<span class="hljs-number">3</span>][<span class="hljs-number">4</span>] = &#123;<br>    &#123;<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>&#125;,<br>    &#123;<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>&#125;,<br>    &#123;<span class="hljs-number">8</span>,<span class="hljs-number">9</span>,<span class="hljs-number">10</span>,<span class="hljs-number">11</span>&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//内层嵌套的花括号并非必须的</span><br><span class="hljs-keyword">int</span> ia[<span class="hljs-number">3</span>][<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>&#125;;<br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//显式的初始化每行的首元素</span><br><span class="hljs-keyword">int</span> ia[<span class="hljs-number">3</span>][<span class="hljs-number">4</span>] = &#123;<br>    &#123;<span class="hljs-number">0</span>&#125;,<br>    &#123;<span class="hljs-number">4</span>&#125;,<br>    &#123;<span class="hljs-number">8</span>&#125;<br>&#125;<br><span class="hljs-comment">//其它的元素执行值初始化</span><br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">int</span> ix[<span class="hljs-number">3</span>][<span class="hljs-number">4</span>] = &#123;<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>&#125;;<br><span class="hljs-comment">//显式的初始化第一行，其它元素执行值初始化</span><br></code></pre></td></tr></table></figure></li>
<li><p>多维数组的下标引用</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//如果表达式含有的下标运算符数量和数组的维度一样多，该表达式的结果将是给定类型的元素</span><br><span class="hljs-comment">//如果表达式含有的下标运算符数量比数组的维度小</span><br><span class="hljs-comment">//则表达式的结果将是给定索引处的一个内层数组</span><br><span class="hljs-built_in"><span class="hljs-keyword">int</span></span> (&amp;row)[<span class="hljs-number">4</span>] = ia[<span class="hljs-number">1</span>]; <span class="hljs-comment">//把row绑定在ia的第二个4元素数组上，row是一个对数组的引用</span><br></code></pre></td></tr></table></figure></li>
<li><p>使用范围for语句处理多维数组</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">size_t</span> cnt = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> &amp;row : ia)&#123; <span class="hljs-comment">//row的类型是含有四个整数的数组的引用</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> &amp;col : row)&#123; <span class="hljs-comment">//col的类型是整数的引用</span><br>        col = cnt;<br>        cnt++;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//要使用范围for语句处理多维数组</span><br><span class="hljs-comment">//除了最内层的循环外，其它所有循环的控制变量都应该是引用类型</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> <span class="hljs-keyword">auto</span> &amp;row : ia)&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> col : row)&#123;<br>        cout&lt;&lt;col&lt;&lt;endl;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//将外层循环的控制变量声明成引用类型是为了避免数组自动被转为指针</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> row : ia)&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> col : row)&#123;<br>        <span class="hljs-comment">//程序将无法通过编译</span><br>        <span class="hljs-comment">//因为row不是引用类型</span><br>        <span class="hljs-comment">//所以编译器初始化row时会将其转换成指向数组中第一个元素的指针</span><br>        <span class="hljs-comment">//这样得到的row的类型就是int*，显然内存的循环就不合法了</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/cpp-primer-5-40/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">cpp_primer_5_40</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/cpp-primer-3-40/">
                        <span class="hidden-mobile">cpp_primer_3_40</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      jQuery('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      jQuery('#modalSearch').on('shown.bs.modal', function() {
        jQuery('#local-search-input').focus();
      });
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
