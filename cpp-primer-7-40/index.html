

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="cpp_primer_5th_chapter5
语句">
  <meta name="author" content="Xie yue">
  <meta name="keywords" content="">
  
  <title>cpp_primer_7_40 - 大树洞！</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.7.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.11","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="大树洞！" type="application/atom+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>山丘与树洞</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="cpp_primer_7_40">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-05-27 15:51" pubdate>
        2021年5月27日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      5k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      62
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">cpp_primer_7_40</h1>
            
            <div class="markdown-body">
              <p>cpp_primer_5th_chapter5</p>
<p>语句</p>
<span id="more"></span>

<ol>
<li><p>练习 5.1 什么是空语句？什么时候会用到空语句？</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 空语句是最简单的语句，空语句由一个单独的分号构成。<br><span class="hljs-bullet">2.</span> 如果在程序的某个地方，语法上需要一条语句但是逻辑上不需要，此时应该使用空语句，空语句什么都不做。<br><span class="hljs-bullet">3.</span> 一种常见的情况是，当循环的全部工作在条件部分就可以完成时，通常会使用到空语句。使用空语句时最好加上注释，从而令代码的阅读者知道这条语句是有意省略内容的。<br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.2 什么是块，什么时候会用到块？</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 块使用花括号括起来的语句和声明的序列，也称为复合语句。<br><span class="hljs-bullet">2.</span> 一个块就是一个作用域，在块中引入的名字只能在块内部以及嵌套在块中的子块访问。<br><span class="hljs-bullet">3.</span> 如果在程序的某个地方，语法上需要一条语句，但是逻辑上需要多条语句，此时应该使用块。块不需要以分号结束。<br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.3 使用逗号运算符重写1.4.1节的while 循环，使它不再需要块，观察改写之后的代码的可读性提高了还是降低了。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//使用连续的逗号运算符可以把多条语句合并为一条，这一点与块的作用类似</span><br><span class="hljs-comment">//但是一般来说，直接使用块在程序的可读性上更有优势</span><br><span class="hljs-comment">//原代码：</span><br><span class="hljs-keyword">while</span>(val &lt;= <span class="hljs-number">10</span>)&#123;<br>    sum += val;<br>    val++;<br>&#125;<br><span class="hljs-comment">//使用逗号运算符之后</span><br><span class="hljs-keyword">while</span>(val &lt;= <span class="hljs-number">10</span>)&#123;<br>    sum += val, val++; <span class="hljs-comment">//很明显，改写之后的代码不够清晰，可读性降低了</span><br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.4 说明下列例子的含义，如果存在问题，试着修改它：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//原程序</span><br><span class="hljs-keyword">while</span>(string :: iterator iter != s.<span class="hljs-built_in">end</span>())&#123;&#125;<br><span class="hljs-comment">//修改之后的程序为：</span><br>string::iterator iter = s.<span class="hljs-built_in">begin</span>();<br><span class="hljs-keyword">while</span>(iter != s.<span class="hljs-built_in">end</span>())&#123;<br>    iter++;<br>&#125;<br><span class="hljs-comment">//原程序</span><br><span class="hljs-keyword">while</span>(<span class="hljs-keyword">bool</span> status = <span class="hljs-built_in">find</span>(word))&#123;<span class="hljs-comment">/* */</span>&#125;<br>	<span class="hljs-keyword">if</span>(!status)&#123;<span class="hljs-comment">/**/</span>&#125;<br><span class="hljs-comment">//修改之后的程序为</span><br><span class="hljs-keyword">bool</span> status;<br><span class="hljs-keyword">while</span>(status = <span class="hljs-built_in">find</span>(word))&#123;<span class="hljs-comment">/* */</span>&#125;<br><span class="hljs-keyword">if</span>(!status)&#123;<span class="hljs-comment">/* */</span>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.5 写一段自己的程序，使用if else语句实现把数字成绩转换成字母成绩的要求。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">int</span> grade;<br>	cout &lt;&lt; <span class="hljs-string">&quot;请输入成绩：&quot;</span>;<br>	cin &gt;&gt; grade;<br>	<span class="hljs-keyword">if</span> (grade &lt; <span class="hljs-number">0</span> || grade&gt;<span class="hljs-number">100</span>) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;该成绩不合法&quot;</span> &lt;&lt; endl;<br>		<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>	&#125;<br>	<span class="hljs-keyword">if</span> (grade == <span class="hljs-number">100</span>) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;成绩等级是：&quot;</span> &lt;&lt; <span class="hljs-string">&quot;A++&quot;</span>&lt;&lt;endl;<br>		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>	&#125;<br>	<span class="hljs-keyword">if</span> (grade &lt; <span class="hljs-number">60</span>) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;成绩等级是：&quot;</span> &lt;&lt; <span class="hljs-string">&quot;F&quot;</span> &lt;&lt; endl;<br>		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>	&#125;<br>	<span class="hljs-keyword">int</span> iU = grade / <span class="hljs-number">10</span>; <span class="hljs-comment">//成绩的十位数</span><br>	<span class="hljs-keyword">int</span> iT = grade % <span class="hljs-number">10</span>; <span class="hljs-comment">//成绩的个位数</span><br>	string score, level, lettergrade;<br>	<span class="hljs-keyword">if</span> (iU == <span class="hljs-number">9</span>) &#123;<br>		score = <span class="hljs-string">&quot;A&quot;</span>;<br>	&#125;<br>	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (iU == <span class="hljs-number">8</span>) &#123;<br>		score = <span class="hljs-string">&quot;B&quot;</span>;<br>	&#125;<br>	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (iU == <span class="hljs-number">7</span>) &#123;<br>		score = <span class="hljs-string">&quot;C&quot;</span>;<br>	&#125;<br>	<span class="hljs-keyword">else</span> &#123;<br>		score = <span class="hljs-string">&quot;D&quot;</span>;<br>	&#125;<br>	<span class="hljs-keyword">if</span> (iT &lt; <span class="hljs-number">3</span>) &#123;<br>		level = <span class="hljs-string">&quot;-&quot;</span>;<br>	&#125;<br>	<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (iT &gt; <span class="hljs-number">7</span>) &#123;<br>		level = <span class="hljs-string">&quot;+&quot;</span>;<br>	&#125;<br>	<span class="hljs-keyword">else</span> &#123;<br>		level = <span class="hljs-string">&quot;&quot;</span>;<br>	&#125;<br>	lettergrade = score +level;<br>	cout &lt;&lt; <span class="hljs-string">&quot;成绩等级是：&quot;</span> &lt;&lt; lettergrade &lt;&lt; endl;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.6 改写上一题的程序，使用条件运算符代替if else语句。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">int</span> grade;<br>	cout &lt;&lt; <span class="hljs-string">&quot;请输入成绩：&quot;</span>;<br>	cin &gt;&gt; grade;<br>	<span class="hljs-keyword">if</span> (grade &lt; <span class="hljs-number">0</span> || grade&gt;<span class="hljs-number">100</span>) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;该成绩不合法&quot;</span> &lt;&lt; endl;<br>		<span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>	&#125;<br>	<span class="hljs-keyword">if</span> (grade == <span class="hljs-number">100</span>) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;成绩等级是：&quot;</span> &lt;&lt; <span class="hljs-string">&quot;A++&quot;</span>&lt;&lt;endl;<br>		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>	&#125;<br>	<span class="hljs-keyword">if</span> (grade &lt; <span class="hljs-number">60</span>) &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;成绩等级是：&quot;</span> &lt;&lt; <span class="hljs-string">&quot;F&quot;</span> &lt;&lt; endl;<br>		<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>	&#125;<br>	<span class="hljs-keyword">int</span> iU = grade / <span class="hljs-number">10</span>; <span class="hljs-comment">//成绩的十位数</span><br>	<span class="hljs-keyword">int</span> iT = grade % <span class="hljs-number">10</span>; <span class="hljs-comment">//成绩的个位数</span><br>	string score, level, lettergrade;<br>	score = (iU == <span class="hljs-number">9</span>) ? <span class="hljs-string">&quot;A&quot;</span><br>		: (iU == <span class="hljs-number">8</span>) ? <span class="hljs-string">&quot;B&quot;</span><br>		: (iU == <span class="hljs-number">7</span>) ? <span class="hljs-string">&quot;C&quot;</span> : <span class="hljs-string">&quot;&quot;</span>;<br>	level = (iT &gt; <span class="hljs-number">7</span>) ? <span class="hljs-string">&quot;+&quot;</span> <br>		: (iT &lt; <span class="hljs-number">3</span>) ? <span class="hljs-string">&quot;-&quot;</span> : <span class="hljs-string">&quot;&quot;</span>;<br>	lettergrade = score +level;<br>	cout &lt;&lt; <span class="hljs-string">&quot;成绩等级是：&quot;</span> &lt;&lt; lettergrade &lt;&lt; endl;<br>	<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.7 改正下列代码段中的错误。</p>
</li>
<li><p>练习 5.8 什么是悬垂else，cpp语言中是如何处理else子句的？</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//悬垂else是指当程序中的if分支多于else分支时，如何为else寻找与之匹配的if分支的问题。</span><br><span class="hljs-comment">//cpp规定，else与离他最近的尚未匹配的if匹配，从而消除了二义性。</span><br></code></pre></td></tr></table></figure></li>
<li><p>switch语句：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//switch语句首先对括号里的表达式求值，该表达式紧跟在switch语句的后面，可以是一个初始化的变量声明。</span><br><span class="hljs-comment">//表达式的值转换成整数类型，然后与每个case的标签进行比较。</span><br><span class="hljs-comment">//case关键字和它对应的值一起被称为case标签。case标签必须是整型常量表达式：</span><br><span class="hljs-keyword">char</span> ch = <span class="hljs-built_in">getVal</span>();<br><span class="hljs-keyword">int</span> ival = <span class="hljs-number">42</span>;<br><span class="hljs-built_in"><span class="hljs-keyword">switch</span></span>(ch)&#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-number">3.14</span>: <span class="hljs-comment">//错误,case标签必须是一个整数</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">    	*/</span><br>    <span class="hljs-keyword">case</span> ival: <span class="hljs-comment">//错误,case标签必须是一个常量</span><br>&#125;<br><span class="hljs-comment">//任何两个case标签的值不能相同，否则就会引发错误</span><br><span class="hljs-comment">//default也是一种特殊的case标签</span><br><span class="hljs-comment">//标签不应该孤零零的出现，它后面必须跟上一条语句或者另外一个case标签</span><br><span class="hljs-comment">//如果switch结构以一个空的default标签作为结束</span><br><span class="hljs-comment">//则default标签后面必须跟上一条空语句或者一个空块</span><br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//如前所述，switch的执行流程有可能会跨过某些case标签</span><br><span class="hljs-comment">//如果程序跳到了某个特定的case，则switch结构中该case标签之前的部分会被忽略掉</span><br><span class="hljs-comment">//那么如果被略过的代码中含有变量的定义该怎么办？</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">答案：如果在某处一个带有初值的变量位于作用域之外，在另一处该变量位于作用域之内，则从前一处跳转到后一处的行为是非法行为。</span><br><span class="hljs-comment">cpp语言规定，不允许跨过变量的初始化语句直接跳到该变量作用域的另一个位置。</span><br><span class="hljs-comment">*/</span><br><span class="hljs-keyword">case</span> <span class="hljs-literal">true</span>:<br>	<span class="hljs-comment">//因为程序的执行流程可能绕开下面的初始化语句，所以该switch语句不合法</span><br>	string file_name; <span class="hljs-comment">//错误：控制流绕过一个隐式初始化的变量</span><br>	<span class="hljs-keyword">int</span> ival = <span class="hljs-number">0</span>; <span class="hljs-comment">//错误：控制流绕过一个显式初始化的变量</span><br>	<span class="hljs-keyword">int</span> jval; <span class="hljs-comment">//正确，因为jval没有初始化</span><br>	<span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-literal">false</span>:<br>	jval = <span class="hljs-built_in">next_num</span>(); <span class="hljs-comment">//正确，给jval赋一个值</span><br>	<span class="hljs-keyword">if</span>(file_name.<span class="hljs-built_in">empty</span>())&#123; <span class="hljs-comment">//file_name在作用域内，但是没有被初始化</span><br>    &#125;<br><br><span class="hljs-comment">//如果需要为某个case分支定义并初始化一个变量，应该把变量定义在块内</span><br><span class="hljs-comment">//从而确保后面的所有case标签都在变量的作用域之外</span><br><span class="hljs-keyword">case</span> <span class="hljs-literal">true</span>:<br>&#123;<br>	<span class="hljs-comment">//正确，声明和初始化语句位于语句块内部</span><br>    string file_name = <span class="hljs-built_in">get_file_name</span>();<br>&#125;<br><span class="hljs-keyword">break</span>;<br><span class="hljs-keyword">case</span> <span class="hljs-literal">false</span>:<br><span class="hljs-comment">//</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.9 编写一段程序，使用一系列if语句统计从cin读入的文本中有多少元音字母。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<br>	string str;<br>	cout &lt;&lt; <span class="hljs-string">&quot;请输入一段文本：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">while</span> (<span class="hljs-built_in">getline</span>(cin, str)) &#123;<br>		<span class="hljs-keyword">if</span> (!str.<span class="hljs-built_in">empty</span>()) &#123;<br>			<span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> ch : str) &#123;<br>				<span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;a&#x27;</span> || ch == <span class="hljs-string">&#x27;e&#x27;</span> || ch == <span class="hljs-string">&#x27;i&#x27;</span> || ch == <span class="hljs-string">&#x27;o&#x27;</span> || ch == <span class="hljs-string">&#x27;u&#x27;</span>) &#123;<br>					count++;<br>				&#125;<br>			&#125;<br>		&#125;<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;count = &quot;</span> &lt;&lt; count &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.10 编写一段程序，既统计元音字母的小写形式，又统计元音字母的大写形式。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//修改上述程序的条件即可</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.11 修改统计元音字母的程序，使其也能统计空格，换行符和制表符的数量。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//修改第一题的条件即可</span><br><span class="hljs-comment">//注意，读入字符的语句应该用cin.get(ch)，而不能使用&gt;&gt;</span><br><span class="hljs-comment">//因为后者会忽略本题要统计的特殊符号</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.12 修改统计元音字母的程序，使其能统计以下含有两个字符的字符序列的数量”ff”，“fl”和“fi”。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">unsigned</span> <span class="hljs-keyword">int</span> count = <span class="hljs-number">0</span>;<br>	<span class="hljs-keyword">char</span> ch;<br>	<span class="hljs-keyword">char</span> pre = <span class="hljs-string">&#x27;\0&#x27;</span>;<br>	string str;<br>	cout &lt;&lt; <span class="hljs-string">&quot;请输入一段文本：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">while</span> (cin.<span class="hljs-built_in">get</span>(ch)) &#123;<br>		<span class="hljs-keyword">if</span> (pre == <span class="hljs-string">&#x27;f&#x27;</span>) &#123;<br>			<span class="hljs-built_in"><span class="hljs-keyword">switch</span></span> (ch) &#123;<br>			<span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;f&#x27;</span>:<span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;l&#x27;</span>:<span class="hljs-keyword">case</span><span class="hljs-number">&#x27;</span>i<span class="hljs-number">&#x27;</span>:<br>				count++;<br>				<span class="hljs-keyword">break</span>;<br>			&#125;<br>		&#125;<br>		pre = ch;<br>	&#125;<br>	cout &lt;&lt; <span class="hljs-string">&quot;count = &quot;</span> &lt;&lt; count &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.13 指出程序的错误然后修改它们。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//总结：switch语句有几个语法要点</span><br><span class="hljs-comment">//（1）必须在必要的地方使用break</span><br><span class="hljs-comment">//（2）语句，应该把变量定义在块作用域内</span><br><span class="hljs-comment">//（3）case标签只能有一个值，且不能是变量</span><br></code></pre></td></tr></table></figure></li>
<li><p>while语句</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">1.</span> 定义在while条件部分或者while循环体内的变量每次迭代都经历了从创建到销毁的过程。<br></code></pre></td></tr></table></figure></li>
<li><p>练习5.14 编写一段程序，从标准输入流中读取若干string对象并查找连续重复出现的单词。所谓连续重复出现的意思是：一个单词后面紧跟着这个单词本身。要求记录连续重复出现的最大次数以及对应的单词。如果这样的单词存在，输出重复出现的最大次数；如果不存在，输出一条信息说明任何单词都没有连续出现过。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//示例：输入为 how now now now brown cow cow</span><br><span class="hljs-comment">//输出为 3</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	<span class="hljs-keyword">unsigned</span> maxCount = <span class="hljs-number">1</span>;<br>	<span class="hljs-keyword">unsigned</span> count = <span class="hljs-number">0</span>;<br>	string maxStr;<br>	string str;<br>	string pre;<br>	<span class="hljs-keyword">while</span> (cin &gt;&gt; str)<br>	&#123;<br>		<span class="hljs-keyword">if</span> (str == pre) &#123;<br>			++count;<br>			<span class="hljs-keyword">if</span> (count &gt; maxCount) &#123;<br>				maxCount = count;<br>				maxStr = str;<br>			&#125;<br>		&#125;<br>		pre = str;<br>	&#125;<br>	<span class="hljs-keyword">if</span> (maxCount &gt; <span class="hljs-number">1</span>) &#123;<br>		cout &lt;&lt; maxCount &lt;&lt; endl;<br>	&#125;<br>	<span class="hljs-keyword">else</span> &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;不存在重复的单词&quot;</span> &lt;&lt; endl;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.15 说明下列循环的含义并改正其中的错误。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//理解for循环的语法规则</span><br><span class="hljs-comment">//特别是for循环控制结构中三条语句的作用</span><br><span class="hljs-comment">//理解循环控制变量和循环终止条件的关系，从而判断循环是否会无限执行下去</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.16 while循环特别适用于那些条件保持不变、反复执行操作的情况，例如当未到达文件末尾时不断读取下一个值。for循环则更像按照步骤迭代，它的索引在在某个范围内依次变化。根据每种循环的习惯用法各自编写一段程序，然后分别用另一种循环改写。如果只能用一种循环，倾向于用哪种？为什么？</p>
</li>
<li><p>练习 5.17 假设有两个包含整数的vector对象，编写一段程序，检验其中一个vector对象是否是另一个vector对象的前缀。为了实现这一目标，对于两个不等长的vector对象，只是挑出长度较短的那个，把它的元素和另一个vector对象比较即可。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//示例：两个vector对象的元素分别是 0 1 1 2 和 0 1 1 2 3 5 8</span><br><span class="hljs-comment">//则程序返回的结果应该为真</span><br><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	vector&lt;<span class="hljs-keyword">int</span>&gt; ivec1&#123; <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span> &#125;;<br>	vector&lt;<span class="hljs-keyword">int</span>&gt; ivec2&#123; <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">8</span>&#125;;<br>	<span class="hljs-keyword">bool</span> flag = <span class="hljs-literal">true</span>;<br>	<span class="hljs-keyword">auto</span> beg1 = ivec1.<span class="hljs-built_in">begin</span>();<br>	<span class="hljs-keyword">auto</span> beg2 = ivec2.<span class="hljs-built_in">begin</span>();<br>	<span class="hljs-keyword">while</span> (beg1 != ivec1.<span class="hljs-built_in">end</span>() &amp;&amp; beg2 != ivec2.<span class="hljs-built_in">end</span>()) &#123;<br>		<span class="hljs-keyword">if</span> (*beg1 != *beg2) &#123;<br>			flag = <span class="hljs-literal">false</span>;<br>			<span class="hljs-keyword">break</span>;<br>		&#125;<br>		beg1++;<br>		beg2++;<br>	&#125;<br>	cout &lt;&lt; flag &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>范围for语句</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span>(declaration : expression)&#123;<br>    statement;<br>&#125;<br><span class="hljs-comment">//expression必须是一个序列，比如用花括号括起来的初始值列表、数组、或者vector或string等类型的对象</span><br><span class="hljs-comment">//这些类型的共同特点是拥有能返回迭代器的begin和end成员</span><br><span class="hljs-comment">//declaration定义一个变量，序列中的每个元素都得能转换成该变量的类型</span><br><span class="hljs-comment">//确保类型相容最简单的办法是使用auto类型说明符</span><br><span class="hljs-comment">//如果需要对序列中的变量执行写操作，循环变量必须声明成引用类型</span><br><span class="hljs-comment">//范围for语句的定义来源于与之等价的传统for语句</span><br><span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> beg = v.<span class="hljs-built_in">begin</span>(), end = v.<span class="hljs-built_in">end</span>(); beg != end; beg++)&#123;<br>    <span class="hljs-keyword">auto</span> &amp;r = *beg; <span class="hljs-comment">//r必须是引用类型，这样才能执行写操作</span><br>    r *= <span class="hljs-number">2</span>;<br>&#125;<br><span class="hljs-comment">//从上面的代码可以看出</span><br><span class="hljs-comment">//范围for语句预存了end()的值，一旦在序列中删除或者添加元素，end函数的值可能就失效了</span><br><span class="hljs-comment">//所以不能通过范围for语句增加或者删除容器的元素</span><br></code></pre></td></tr></table></figure></li>
<li><p>do while语句</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">do</span> </span><br><span class="hljs-function">    statement</span><br><span class="hljs-function"><span class="hljs-title">while</span><span class="hljs-params">(condition)</span></span>;<br><span class="hljs-comment">//do while语句应该在括号包围起来的条件后面用一个分号表示语句结束</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.18 说明下列循环的含义并改正其中的错误</p>
</li>
<li><p>练习 5.19 编写一段程序，使用do while循环重复的执行下述任务：首先提示用户输入两个string对象，然后挑出那个较短的并输出它。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	string flagStr;<br>	<span class="hljs-keyword">do</span> &#123;<br>		cout &lt;&lt; <span class="hljs-string">&quot;请输入两个字符串：&quot;</span> &lt;&lt; endl;<br>		string s1, s2;<br>		cin &gt;&gt; s1 &gt;&gt; s2;<br>		(s1.<span class="hljs-built_in">size</span>() &lt; s2.<span class="hljs-built_in">size</span>()) ? (cout &lt;&lt; s1 &lt;&lt; endl) : (cout &lt;&lt; s2 &lt;&lt; endl);<br>		cout &lt;&lt; <span class="hljs-string">&quot;是否继续(yes or no)：&quot;</span> &lt;&lt; endl;<br>		cin &gt;&gt; flagStr;<br>	&#125; <span class="hljs-keyword">while</span> (flagStr!=<span class="hljs-string">&quot;&quot;</span>&amp;&amp;flagStr[<span class="hljs-number">0</span>]!=<span class="hljs-string">&#x27;n&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>break语句</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//break语句的作用范围仅限于最近的循环或者switch</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.20 编写一段程序，从标准输入中读取string对象的序列直到连续出现两个相同的单词或者所有的单词都读完了为止。使用while循环一次读取一个单词，当一个单词连续出现两次时使用break语句终止循环。输出连续重复的单词，或者输出一个消息说明没有任何单词是连续重复出现的。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	string result = <span class="hljs-string">&quot;不存在重复的单词&quot;</span>;<br>	string preWord, curWord;<br>	<span class="hljs-keyword">while</span> (cin &gt;&gt; curWord) &#123;<br>		<span class="hljs-keyword">if</span> (curWord == preWord) &#123;<br>			result = curWord;<br>			<span class="hljs-keyword">break</span>;<br>		&#125;<br>		<span class="hljs-keyword">else</span> &#123;<br>			preWord = curWord;<br>		&#125;<br>	&#125;<br>	cout &lt;&lt; result &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>continue语句</p>
</li>
<li><p>练习 5.21 修改5.20练习题的程序，使其找到的重复单词必须以大写字母开头。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	string result = <span class="hljs-string">&quot;不存在重复的单词&quot;</span>;<br>	string preWord, curWord;<br>	<span class="hljs-keyword">while</span> (cin &gt;&gt; curWord) &#123;<br>		<span class="hljs-keyword">if</span> (curWord == preWord &amp;&amp; curWord[<span class="hljs-number">0</span>] == <span class="hljs-built_in">toupper</span>(curWord[<span class="hljs-number">0</span>])) &#123;<br>			result = curWord;<br>			<span class="hljs-keyword">break</span>;<br>		&#125;<br>		<span class="hljs-keyword">else</span> &#123;<br>			preWord = curWord;<br>		&#125;<br>	&#125;<br>	cout &lt;&lt; result &lt;&lt; endl;<br>&#125;<br></code></pre></td></tr></table></figure></li>
<li><p>goto语句：不要在程序中使用goto语句，因为它使得程序既难理解又难修改。</p>
</li>
<li><p>异常处理机制：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//异常处理机制为程序中的异常检测和异常处理这两部分的协作提供支持，异常处理包括</span><br><span class="hljs-comment">//（1）throw表达式，异常检测部分用throw表达式来表示它遇到了无法处理的问题</span><br><span class="hljs-comment">//通常说throw引发了异常</span><br><span class="hljs-comment">//（2）try语句块，异常处理部分使用try语句块处理异常。try语句块以关键字try开始</span><br><span class="hljs-comment">//并以一个或多个catch子句结束</span><br><span class="hljs-comment">//try语句块中代码抛出的异常通常会被某个catch子句处理</span><br><span class="hljs-comment">//因为catch子句&quot;处理&quot;异常，所以它们也被称作异常处理代码</span><br><span class="hljs-comment">//（3）一套异常类，用于在throw表达式和相关的catch子句之间传递异常的具体信息</span><br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//首先检查两条数据是否是关于同一种书籍的</span><br><span class="hljs-keyword">if</span>(item1.<span class="hljs-built_in">isbn</span>() != item2.<span class="hljs-built_in">isbn</span>())&#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">&quot;ISBN号不一致&quot;</span>);<br>&#125;<br>cout &lt;&lt; item1 + item2 &lt;&lt; endl;<br><span class="hljs-comment">//在这段代码中，如果ISBN不一样就抛出一个异常</span><br><span class="hljs-comment">//该异常是类型runtime_error的对象</span><br><span class="hljs-comment">//抛出异常将终止当前函数，并把控制权转移给能处理该异常的代码</span><br><span class="hljs-comment">//runtime_error时标准库异常类型的一种，定义在stdexcept头文件中</span><br><span class="hljs-comment">//初始化runtime_error对象的方式是给它提供一个string对象或者一个c风格字符串</span><br><span class="hljs-comment">//这个字符串中有一些关于异常的辅助信息</span><br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//try语句块的通用语法形式是</span><br><span class="hljs-keyword">try</span>&#123;<br>    <span class="hljs-comment">//program-statements</span><br>&#125;<span class="hljs-built_in"><span class="hljs-keyword">catch</span></span>(exception-declaration)&#123;<br>    <span class="hljs-comment">//handler-statements</span><br>&#125;<span class="hljs-built_in"><span class="hljs-keyword">catch</span></span>(exception-declaration)&#123;<br>    <span class="hljs-comment">//handler-statements</span><br>&#125;<br><span class="hljs-comment">//当选中了某个catch子句处理异常之后，执行与之对应的块。</span><br><span class="hljs-comment">//catch一旦完成，程序跳转到try语句块最后一个catch子句之后的那条语句继续执行</span><br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">while</span>(cin &gt;&gt; item1 &gt;&gt; item2)&#123;<br>    <span class="hljs-keyword">try</span>&#123;<br>        <span class="hljs-comment">//执行添加两个Sales_item对象的代码</span><br>        <span class="hljs-comment">//如果添加失败，代码抛出一个runtime_error异常</span><br>    &#125;<span class="hljs-built_in"><span class="hljs-keyword">catch</span></span>(runtime_error err)&#123; <br>        cout &lt;&lt; err.<span class="hljs-built_in">what</span>()<br>             &lt;&lt; <span class="hljs-string">&quot;\nTry Again? Enter y or n&quot;</span>&lt;&lt;endl;<br>        <span class="hljs-keyword">char</span> c;<br>        cin &gt;&gt; c;<br>        <span class="hljs-keyword">if</span>(!cin || c == <span class="hljs-string">&#x27;n&#x27;</span>)<br>            <span class="hljs-keyword">break</span>;<br>    &#125;<br>&#125;<br><span class="hljs-comment">//每个标准库类型都定义了名为what的成员函数</span><br><span class="hljs-comment">//这些函数没有参数，返回值是c风格字符串（const char*）</span><br><span class="hljs-comment">//runtime_error的what成员返回的是初始化一个具体对象时所用的string对象的副本</span><br></code></pre></td></tr></table></figure>

<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//在复杂系统中，程序在遇到抛出异常的代码前，其执行路径可能已经经过了多个try语句块</span><br><span class="hljs-comment">//例如，一个try语句块可能调用了包含另一个try语句块的函数</span><br><span class="hljs-comment">//寻找处理代码的过程与函数调用链正好相反。当异常被抛出的时候，首先搜索抛出该异常的函数</span><br><span class="hljs-comment">//如果没有找到匹配的catch子句，终止该函数，并在调用该函数的函数中继续寻找</span><br><span class="hljs-comment">//如果还是没有找到匹配的catch子句，这个新的函数也被终止，继续搜索调用它的函数</span><br><span class="hljs-comment">//以此类推，沿着程序的执行路径逐层回退，直到找到适当类型的catch子句为止</span><br><span class="hljs-comment">//如果最终还是没能找到任何匹配的catch子句，程序转到名为terminate的标准库函数</span><br><span class="hljs-comment">//该函数的行为与系统有关，一般情况下，执行该函数将导致程序非正常退出</span><br></code></pre></td></tr></table></figure></li>
<li><p>标准异常</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//cpp标准库定义了一组类，用于报告标准库函数遇到的问题。</span><br><span class="hljs-comment">//这些异常类也可以在用户编写的程序中使用，它们分别定义在四个头文件中</span><br><span class="hljs-comment">//1. exception</span><br><span class="hljs-comment">//定义了最通用的异常类exception，只报告异常的发生，不提供任何额外信息</span><br><span class="hljs-comment">//2. stdexcept</span><br><span class="hljs-comment">//定义了几种常用的异常类</span><br><span class="hljs-comment">//3. new</span><br><span class="hljs-comment">//定义了bad_alloc异常类型</span><br><span class="hljs-comment">//4. type_info</span><br><span class="hljs-comment">//定义了bad_cast异常类型</span><br><span class="hljs-comment">//标准库类型只定义了几种运算，包括创建和拷贝异常类型的对象，以及为异常类型的对象赋值</span><br><span class="hljs-comment">//只能以默认初始化的方式初始化exception、bad_alloc和bad_cast对象，不允许为这些对象提供初值</span><br><span class="hljs-comment">//其他异常类型的行为则恰好相反（stdexcept定义的各种异常类）</span><br><span class="hljs-comment">//应该使用string对象或者c风格字符串初始化这些类型的对象，但是不允许使用默认初始化的方式</span><br><span class="hljs-comment">//创建此类对象时，必须提供初始值，该初始值含有错误相关的信息</span><br><span class="hljs-comment">//异常类型只定义了一个名为what的成员函数，该函数没有任何参数</span><br><span class="hljs-comment">//what的返回值与异常对象的类型有关</span><br><span class="hljs-comment">//如果异常类型有一个字符串初始值，则what返回该字符串，对于无初始值的类型来讲，由编译器决定。</span><br></code></pre></td></tr></table></figure></li>
<li><p>练习 5.23 编写一段程序，从标准输入中读取两个整数，输出第一个整数除以第二个数的结果</p>
</li>
<li><p>练习 5.24 修改你的程序，使得当第二个数为0时抛出异常，先不要定义catch子句，运行程序并真的为除数输入0，看看会发生什么</p>
</li>
<li><p>练习 5.25 修改上一题的程序，使用try语句块去捕获异常，catch子句应该为用户输出一条提示信息，询问其是否输入新数并重新执行try语句块的内容。</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>	cout &lt;&lt; <span class="hljs-string">&quot;请依次输入被除数和除数：&quot;</span> &lt;&lt; endl;<br>	<span class="hljs-keyword">int</span> v1, v2;<br>	<span class="hljs-keyword">while</span> (cin &gt;&gt; v1 &gt;&gt; v2) &#123;<br>		<span class="hljs-keyword">try</span> &#123;<br>			<span class="hljs-keyword">if</span> (v2 == <span class="hljs-number">0</span>) &#123;<br>				<span class="hljs-keyword">throw</span> <span class="hljs-built_in">runtime_error</span>(<span class="hljs-string">&quot;除数不能为零&quot;</span>);<br>			&#125;<br>			cout &lt;&lt; <span class="hljs-string">&quot;结果为：&quot;</span> &lt;&lt; v1 / v2 &lt;&lt; endl;<br>		&#125;<br>		<span class="hljs-built_in"><span class="hljs-keyword">catch</span></span> (runtime_error err) &#123;<br>			cout &lt;&lt; err.<span class="hljs-built_in">what</span>() &lt;&lt; endl;<br>		&#125;<br>		cout &lt;&lt; <span class="hljs-string">&quot;需要继续嘛（y or n）：&quot;</span> &lt;&lt; endl;<br>		<span class="hljs-keyword">char</span> ch;<br>		cin &gt;&gt; ch;<br>		<span class="hljs-keyword">if</span> (ch == <span class="hljs-string">&#x27;n&#x27;</span>) <span class="hljs-keyword">break</span>;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure></li>
</ol>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/cpp-primer-8-40/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">cpp_primer_8_40</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/cpp-primer-6-40/">
                        <span class="hidden-mobile">cpp_primer_6_40</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- 不蒜子统计PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            总访问量 
            <span id="busuanzi_value_site_pv"></span>
             次
          </span>
      
      
        <!-- 不蒜子统计UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            总访客数 
            <span id="busuanzi_value_site_uv"></span>
             人
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.3/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.1/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js" ></script>



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>




  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      jQuery('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      jQuery('#modalSearch').on('shown.bs.modal', function() {
        jQuery('#local-search-input').focus();
      });
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
